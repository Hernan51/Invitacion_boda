<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Pinyon+Script&family=Poppins:wght@300;400&display=swap"
    rel="stylesheet">
  <title>Boda Karen & Sergio ‚Äî 11 ‚Ä¢ 07 ‚Ä¢ 2026</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Sacramento&display=swap"
    rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Bona+Nova+SC:ital,wght@0,400;0,700;1,400&family=Dancing+Script:wght@400..700&family=Sacramento&display=swap"
    rel="stylesheet">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;600&family=Poppins:wght@300;400;600&display=swap"
    rel="stylesheet">

  <!-- Forzar que, al recargar, la p√°gina comience desde arriba -->
  <script>
    (function () {
      if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
      }
      if (location.hash) {
        history.replaceState(null, '', location.pathname + location.search);
      }
      window.addEventListener('load', function () { window.scrollTo(0, 0); });
      window.addEventListener('pageshow', function (e) { if (e.persisted) window.scrollTo(0, 0); });
      window.addEventListener('beforeunload', function () { window.scrollTo(0, 0); });
    })();
  </script>


</head>

<body>

  <!-- (Intro eliminada) -->

  <!-- Topbar: logo + hamburguesa -->
  <div class="topbar">
    <img src="img/flores.png" class="decoracion-rama rama-superior" alt="">
    <img src="img/flores_2.png" class="decoracion-rama rama-inferior" alt="">
    <div class="topbar-inner">
      <a href="#home" class="logo" aria-label="Inicio">
        <img src="img/logo.jpg" alt="Logo">
        <span>Karen & Sergio</span>
      </a>
      <button class="hamburger" id="hamburger" aria-label="Abrir men√∫" aria-controls="menuOverlay"
        aria-expanded="false">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
    </div>
  </div>

  <!-- Overlay / √çndice de la p√°gina -->
  <div id="menuOverlay" role="dialog" aria-modal="true">
    <nav class="menu">
      <a href="#home">Inicio <br> </a>
      <a href="#ceremonia">Ceremonia <small>Templo</small></a>
      <a href="#recepcion">Recepci√≥n <small>Fiesta</small></a>
      <a href="#info">Informaci√≥n <small>Regalos / Confirmaci√≥n</small></a>
      <a href="#itinerario">Itinerario</a>
    </nav>
  </div>

  <div id="inviteMount"></div>

  <div class="wrap">
    <header class="hero" id="home">
      <div class="hero-invite">
        <h1 class="names-alt">
          <span class="first">Karen</span><br>
          <span class="amp-alt">&</span><br>
          <span class="last">Sergio</span>
        </h1>

        <div class="hero-date dancing-script">
          <div class="side">S√ÅBADO</div>

          <div class="center">
            <div class="day">11</div>
            <div class="month">JULIO</div>
            <!-- A√±o que se ver√° solo en m√≥vil -->
            <div class="year year-mobile" style="color:#2f3b5c; font-weight:600;">2026</div>
          </div>

          <!-- A√±o en la tercera columna (derecha del palito) para escritorio -->
          <div class="side year-desktop">
            <div class="year" style="color:#2f3b5c; font-weight:600;">2026</div>
          </div>
        </div>



      </div>

      <!-- (opcional) deja tu contador y bot√≥n aqu√≠ -->
      <div class="countdown dancing-script" id="countdown" style="font-size: 20px;">‚ÄúDios junt√≥ nuestras manos y nos se√±al√≥ el camino. <br>
        Nosotros uniremos nuestras vidas y lo recorreremos con f√© y amor. ‚Äù
        
      </div>

    </header>

    <!-- Contador -->
    <h3 style="text-align: center;" class="sacramento">¬°Qu√© comience la cuenta regresiva!</h3>
    <div class="countdown" id="countdown">
      <div class="cd-box">
        <div class="cd-num" id="d">‚Äì</div>
        <div class="cd-lbl">D√≠as</div>
      </div>
      <div class="cd-box">
        <div class="cd-num" id="h">‚Äì</div>
        <div class="cd-lbl">Horas</div>
      </div>
      <div class="cd-box">
        <div class="cd-num" id="m">‚Äì</div>
        <div class="cd-lbl">Min</div>
      </div>
      <div class="cd-box">
        <div class="cd-num" id="s">‚Äì</div>
        <div class="cd-lbl">Seg</div>
      </div>
    </div>

    <div class="add-to-cal" style="margin-top: 2%;">
      <button class="btn dancing-script" id="addToCalBtn">Agregar al calendario</button>
    </div>

    </header>

    <!-- Ceremonia -->
    <section class="stack-section" id="ceremonia">

      <!-- Imagen fija -->
      <div class="stack-bg">
        <img src="img/templo.jpeg" alt="">
      </div>

      <!-- Texto que pasa por encima -->
      <div class="stack-content">
        <div class="ceremonia-text">
          <h2 class="sacramento">Ceremonia Religiosa</h2>
          <p class="dancing-script" style="font-size: 25px;">6:00 PM</p>
          <p class="dancing-script">Templo de San Antonio de Padua</p>
          <p class="dancing-script small">
            Nos encantar√° contar con tu presencia en la ceremonia donde daremos el ‚Äús√≠‚Äù.
          </p>
          <div class="btn">
            <a class="dancing-script" href="#" target="_blank">Ver mapa</a>
          </div>
        </div>
      </div>

    </section>


    <section class="stack-section" id="recepcion">

      <div class="stack-bg">
        <img src="img/salon_v2.png" alt="Ilustraci√≥n tipo acuarela del sal√≥n">
      </div>

      <div class="stack-content">
        <div class="ceremonia-text">
          <h2 class="sacramento">Recepci√≥n</h2>
          <p class="dancing-script" style="font-size: 25px;">7:30 PM</p>
          <p class="dancing-script">Sal√≥n de eventos "Casa de Piedra"</p>
          <p class="dancing-script small">
            Despu√©s de la ceremonia, celebraremos con cena, m√∫sica y mucho amor.
          </p>
          <div class="btn">
            <a class="dancing-script" href="#" target="_blank" rel="noopener">Ver mapa</a>
          </div>
        </div>
      </div>

    </section>

    <!-- Info √∫til -->
    <section class="grid grid-3" id="info">
      <div class="card">
        <h3 class="sacramento">C√≥digo de vestimenta</h3>
        <p class="dancing-script" style="font-size: 19px;">Formal.</p>
      </div>

      <div class="card">
        <h3 class="sacramento">Confirmaci√≥n</h3>
        <p class="dancing-script" style="font-size: 19px;">¬°Porque nuestra historia no estar√≠a completa sin t√≠,
          esperamos contar con tu presencia. <br>Por favor confirma tu asistencia antes del d√≠a:</p>
        <a class="btn"
          href="https://wa.me/?text=Confirmo%20mi%20asistencia%20a%20la%20boda%20de%20Karen%20y%20Sergio%20el%2011%20de%20julio%20de%202026"
          target="_blank" rel="noopener">Confirmar por WhatsApp</a>
      </div>
    </section>


    <!-- Itinerario + sugerencia de regalo -->
    <section id="itinerario" class="itinerary-section">
      <h2 class="sacramento">Itinerario De Nuestra Boda</h2>

      <div class="itinerary-rows">
        <div class="itinerary-row first">
          <div class="itinerary-icon"><img src="img/iglesia.png" alt="" style="width: 100px;height: auto;"></div>
          <div class="itinerary-line">
            <div class="itinerary-heart">
              <svg class="heart" viewBox="0 0 100 85" aria-hidden="true">
                <path d="M50,20 C20,0 10,50 50,80 C90,50 80,0 50,20 Z" />
              </svg>
            </div>

            </span>
          </div>
          <div class="itinerary-text">
            <div class="dancing-script">Ceremonia Religiosa</div>
            <div class="it-time">18:00 hrs</div>
          </div>
        </div>

        <div class="itinerary-row">
          <div class="itinerary-icon"><img src="img/copa.png" alt="" style="width: 100px;height: auto;"></div>
          <div class="itinerary-line">
            <div class="itinerary-heart">
              <svg class="heart" viewBox="0 0 100 85" aria-hidden="true">
                <path d="M50,20 C20,0 10,50 50,80 C90,50 80,0 50,20 Z" />
              </svg>
            </div>
          </div>
          <div class="itinerary-text">
            <div class="dancing-script">Recepci√≥n</div>
            <div class="it-time">19:30 hrs</div>
          </div>
        </div>

        <div class="itinerary-row">
          <div class="itinerary-icon"><img src="img/cena.png" style="width: 100px;height: auto;"></div>
          <div class="itinerary-line">
            <div class="itinerary-heart">
              <svg class="heart" viewBox="0 0 100 85" aria-hidden="true">
                <path d="M50,20 C20,0 10,50 50,80 C90,50 80,0 50,20 Z" />
              </svg>
            </div>
          </div>
          <div class="itinerary-text">
            <div class="dancing-script">Cena</div>
            <div class="it-time">20:00 hrs</div>
          </div>
        </div>

        <div class="itinerary-row">
          <div class="itinerary-icon"><img src="img/protocolov.png" alt="" style="width: 100px;height: auto;"></div>
          <div class="itinerary-line">
            <div class="itinerary-heart">
              <svg class="heart" viewBox="0 0 100 85" aria-hidden="true">
                <path d="M50,20 C20,0 10,50 50,80 C90,50 80,0 50,20 Z" />
              </svg>
            </div>
          </div>
          <div class="itinerary-text">
            <div class="dancing-script">Protocolo</div>
            <div class="it-time">19:00 hrs</div>
          </div>
        </div>

        <div class="itinerary-row">
          <div class="itinerary-icon"><img src="img/fies.png" style="width: 100px;height: auto;"></div>
          <div class="itinerary-line">
            <div class="itinerary-heart">
              <svg class="heart" viewBox="0 0 100 85" aria-hidden="true">
                <path d="M50,20 C20,0 10,50 50,80 C90,50 80,0 50,20 Z" />
              </svg>
            </div>
          </div>
          <div class="itinerary-text">
            <div class="dancing-script">Disfruta la boda</div>
            <div class="it-time">Durante la noche</div>
          </div>
        </div>

        <div class="itinerary-row last">
          <div class="itinerary-icon"><img src="img/carro_v2.png" style="width: 100px;height: auto;"></div>
          <div class="itinerary-line">
            <div class="itinerary-heart">
              <svg class="heart" viewBox="0 0 100 85" aria-hidden="true">
                <path d="M50,20 C20,0 10,50 50,80 C90,50 80,0 50,20 Z" />
              </svg>
            </div>
          </div>
          <div class="itinerary-text">
            <div class="dancing-script">FIN DEL EVENTO</div>
            <div class="it-time">02:00 hrs</div>
          </div>
        </div>
      </div>

      <!-- Sugerencia de regalo -->
      <div class="itinerary-gift">
        <h3 class="sacramento">Sugerencia de regalo</h3>
        <p class="dancing-script" style="font-size: 17px;">
          Nuestro mejor regalo ser√° disfrutar contigo de este d√≠a tan especial.<br>
          Cualquier detalle de tu parte ser√° bienvenido con mucho cari√±o. Nuestras sugerencias:
        </p>

        <div class="gift-options">
          <div class="gift-option">
            <div class="gift-icon"><img src="img/sobre.jpeg" alt=""></div>
            <div class="dancing-script" style="font-size: 18px;">Lluvia de sobres</div>
          </div>



          <div class="gift-option">
            <div class="gift-icon"><img src="img/mesa_regalos.png" alt=""></div>
            <div class="dancing-script" style="font-size: 18px;">Mesa de regalos</div>
            <a id="btnLiverpool" class="btn btn-liverpool gift-btn"
              href="https://mesaderegalos.liverpool.com.mx/milistaderegalos/51755634" target="_blank" rel="noopener">
              <span>Liverpool</span>
            </a>
          </div>
        </div>

      </div>
  </div>
  </section>

  <!-- Fuentes elegantes (opcional) -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Great+Vibes&display=swap"
    rel="stylesheet">

  <section class="hotel-board-wrapper">
    <div class="hotel-board">
      <p class="sacramento">Recomendaciones</p>
      <h2 class="dancing-script">HOTELES</h2>

      <ul class="hotel-board-list">

        <!-- LAS TROJES -->
        <li>
          <div class="hotel-row" data-hotel="las-trojes">
            <span>HOTEL LAS TROJES</span>
            <span class="hotel-plus">+</span>
          </div>
          <div class="hotel-desc">
            <div class="hotel-carousel">
              <button class="carousel-btn prev">‚Äπ</button>

              <div class="carousel-track">
                <img src="https://www.hotellastrojes.com.mx/images/home.jpg" alt="Hotel Las Trojes">
                <img src="https://www.hotellastrojes.com.mx/images/galerias/habitacion-sencilla-1533165647.jpg"
                  alt="Hotel Las Trojes">
                <img src="https://www.hotellastrojes.com.mx/images/galerias/master-suite-1539624117.jpg"
                  alt="Hotel Las Trojes">
                <img src="https://www.hotellastrojes.com.mx/images/galerias/habitacion-doble-1533160264.jpg"
                  alt="Hotel Las Trojes">
                <img src="https://www.hotellastrojes.com.mx/images/galerias/alberca-1541007388s.jpg"
                  alt="Hotel Las Trojes">
                <img src="https://www.hotellastrojes.com.mx/images/galerias/alberca-1541007367s.jpg"
                  alt="Hotel Las Trojes">
              </div>

              <button class="carousel-btn next">‚Ä∫</button>
            </div>

            <p><strong>Direcci√≥n:</strong> Blvd. Luis Donaldo Colosio 792.</p>
            <p>Hotel con excelente ubicaci√≥n, alberca, jardines y cerca de plazas comerciales.</p>
            <a class="hotel-map-btn"
              href="https://www.google.com/maps/search/?api=1&query=Hotel+Las+Trojes+Aguascalientes" target="_blank">Ver
              en Google Maps</a>
          </div>

        </li>

        <!-- HILTON -->
        <li>
          <div class="hotel-row" data-hotel="hilton">
            <span>HILTON GARDEN INN</span>
            <span class="hotel-plus">+</span>
          </div>
          <div class="hotel-desc">
            <div class="hotel-carousel">
              <button class="carousel-btn prev">‚Äπ</button>

              <div class="carousel-track">
                <img
                  src="https://www.hilton.com/im/en/AGUGIGI/3808571/outdoor-pool-night.jpg?impolicy=crop&cw=4500&ch=2519&gravity=NorthWest&xposition=0&yposition=240&rw=768&rh=430"
                  alt="Hotel Hilton Garden Inn">
                <img
                  src="https://www.hilton.com/im/en/AGUGIGI/3808511/agugigi-exterior-day.jpg?impolicy=crop&cw=3914&ch=2191&gravity=NorthWest&xposition=0&yposition=404&rw=768&rh=430"
                  alt="Hotel Hilton Garden Inn">
                <img
                  src="https://www.hilton.com/im/en/AGUGIGI/3808398/1-king-bed-guestroom-k1.jpg?impolicy=crop&cw=4500&ch=2519&gravity=NorthWest&xposition=0&yposition=240&rw=768&rh=430"
                  alt="Hotel Hilton Garden Inn">
                <img
                  src="https://www.hilton.com/im/en/AGUGIGI/3808583/1-king-1-bedroom-suite-k1rrp1.jpg?impolicy=crop&cw=4500&ch=2519&gravity=NorthWest&xposition=0&yposition=240&rw=768&rh=430"
                  alt="Hotel Hilton Garden Inn">
              </div>

              <button class="carousel-btn next">‚Ä∫</button>
            </div>
            <p><strong>Direcci√≥n:</strong> Blvd. Luis Donaldo Colosio 404.</p>
            <p>Moderno, c√≥modo y muy cercano a restaurantes y centros comerciales.</p>
            <a class="hotel-map-btn"
              href="https://www.google.com/maps/search/?api=1&query=Hilton+Garden+Inn+Aguascalientes"
              target="_blank">Ver en Google Maps</a>
          </div>
        </li>

        <!-- MARRIOTT -->
        <li>
          <div class="hotel-row" data-hotel="marriott">
            <span>MARRIOTT AGUASCALIENTES</span>
            <span class="hotel-plus">+</span>
          </div>
          <div class="hotel-desc">

            <div class="hotel-carousel">
              <button class="carousel-btn prev">‚Äπ</button>

              <div class="carousel-track">
                <img
                  src="https://cache.marriott.com/is/image/marriotts7prod/agumc-pool-3826:Pano-Hor?wid=1600&fit=constrain"
                  alt="Hotel Marriott Aguascalientes">
                <img
                  src="https://cache.marriott.com/content/dam/marriott-renditions/AGUMC/agumc-lobby-3813-hor-pano.jpg?output-quality=70&interpolation=progressive-bilinear&downsize=1600px:*"
                  alt="Hotel Marriott Aguascalientes">
                <img
                  src="https://cache.marriott.com/content/dam/marriott-renditions/AGUMC/agumc-junior-3779-hor-pano.jpg?output-quality=70&interpolation=progressive-bilinear&downsize=1600px:*"
                  alt="Hotel Marriott Aguascalientes">
                <img
                  src="https://cache.marriott.com/content/dam/marriott-renditions/AGUMC/agumc-guestroom-2805-hor-clsc.jpg?output-quality=70&interpolation=progressive-bilinear&downsize=1140px:*"
                  alt="Hotel Marriott Aguascalientes">
              </div>

              <button class="carousel-btn next">‚Ä∫</button>
            </div>
            <p><strong>Direcci√≥n:</strong> Av. Colosio 333, Zona Norte.</p>
            <p>Hotel de lujo con excelentes amenidades, restaurantes y ubicaci√≥n privilegiada.</p>
            <a class="hotel-map-btn" href="https://www.google.com/maps/search/?api=1&query=Marriott+Aguascalientes"
              target="_blank">Ver en Google Maps</a>
          </div>
        </li>

      </ul>

    </div>

  </section>


  <section class="servicios">
    <div class="hotel-board">
      <p class="sacramento">SOS</p>
      <h2 class="dancing-script">SERVICIOS</h2>

      <!-- AQU√ç SE INYECTA TODO DESDE EL CSV -->
      <ul class="hotel-board-list" id="servicesList"></ul>

    </div>
  </section>


  </div>

  <script>
    const section = document.querySelector('#ceremonia');
    const bgImage = section.querySelector('.stack-bg img');

    window.addEventListener('scroll', () => {
      const rect = section.getBoundingClientRect();
      const windowHeight = window.innerHeight;

      // Progreso del scroll dentro de la secci√≥n (0 ‚Üí 1)
      let progress = 1 - rect.bottom / (windowHeight + rect.height);
      progress = Math.min(Math.max(progress, 0), 1);

      // Brillo: de 1 a 0.85 (ajusta si quieres)
      const brightness = 1 - (progress * 0.55);

      bgImage.style.filter = `brightness(${brightness})`;
    });
  </script>

  <script>
    // Seleccionamos todas las secciones con efecto stack
    const stackSections = document.querySelectorAll('.stack-section');

    window.addEventListener('scroll', () => {
      stackSections.forEach(section => {
        const bgImage = section.querySelector('.stack-bg img');
        const rect = section.getBoundingClientRect();
        const windowHeight = window.innerHeight;

        // Verificamos si la secci√≥n est√° visible en pantalla para ahorrar recursos
        if (rect.top < windowHeight && rect.bottom > 0) {

          // Progreso del scroll dentro de la secci√≥n (0 ‚Üí 1)
          let progress = 1 - rect.bottom / (windowHeight + rect.height);
          progress = Math.min(Math.max(progress, 0), 1);

          // Brillo: de 1 a 0.45 (usando el factor 0.55 que ten√≠as)
          const brightness = 1 - (progress * 0.55);

          bgImage.style.filter = `brightness(${brightness})`;
        }
      });
    });
  </script>





  <script>


    const rows = document.querySelectorAll(".hotel-row");

    rows.forEach(row => {
      row.addEventListener("click", () => {

        const desc = row.nextElementSibling;

        // Cerrar otros
        document.querySelectorAll(".hotel-desc.open").forEach(openDesc => {
          if (openDesc !== desc) {
            openDesc.classList.remove("open");
            openDesc.previousElementSibling.classList.remove("open");
          }
        });

        // Alternar este
        desc.classList.toggle("open");
        row.classList.toggle("open");
      });
    });
  </script>

  <script>
    document.querySelectorAll('.hotel-carousel').forEach(carousel => {
      const track = carousel.querySelector('.carousel-track');
      const images = track.querySelectorAll('img');
      const prev = carousel.querySelector('.prev');
      const next = carousel.querySelector('.next');

      let index = 0;

      function updateCarousel() {
        track.style.transform = `translateX(-${index * 100}%)`;
      }

      next.addEventListener('click', () => {
        index = (index + 1) % images.length;
        updateCarousel();
      });

      prev.addEventListener('click', () => {
        index = (index - 1 + images.length) % images.length;
        updateCarousel();
      });
    });
  </script>



  <script>
    const topbar = document.querySelector('.topbar');
    const hotelSection = document.querySelector('.hotel-board-wrapper');

    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          topbar.classList.add('light');
        } else {
          topbar.classList.remove('light');
        }
      });
    }, {
      threshold: 0.3
    });

    observer.observe(hotelSection);
  </script>

  <script>
    document.querySelectorAll('.section-stack').forEach(section => {
      const img = section.querySelector('.watermark img');

      if (!img) return;

      window.addEventListener('scroll', () => {
        const rect = section.getBoundingClientRect();
        const windowHeight = window.innerHeight;

        let progress = 1 - rect.bottom / (windowHeight + rect.height);
        progress = Math.min(Math.max(progress, 0), 1);

        // Brillo de 1 ‚Üí 0.85 (muy sutil)
        const brightness = 1 - (progress * 0.15);

        img.style.filter = `brightness(${brightness})`;
      });
    });
  </script>


  <script>

    // Tarjeta de pases por query (?n=Nombre&p=3)
    (function () {
      const qs = new URLSearchParams(location.search);
      const name = qs.get('n');
      const passesRaw = qs.get('p');
      const passes = parseInt(passesRaw, 10);

      // Si no hay pases o nombre -> modo normal, no hacemos nada
      if (!name || !passesRaw || isNaN(passes)) return;

      // Activamos "modo pase"
      document.body.classList.add('mode-pass');

      const host = document.getElementById('inviteMount');
      const wrap = document.createElement('div');
      wrap.className = 'invite-card';
      wrap.innerHTML = `
      <div class="invite-head">
        <img class="invite-photo" src="img/kys.jpeg" alt="Pareja" />
        <div class="invite-names">
          <div class="big">KAREN & SERGIO</div>
          <div class="date">11 JULIO 2026</div>
        </div>
      </div>
      <div class="invite-body">
        <div class="envelope-box"><img src="img/sobre.jpeg" alt="Sobre"></div>
        <div class="reserve">HEMOS RESERVADO PARA USTEDES</div>
        <div class="dots" id="dots"></div>
        <div class="who" id="whoname"></div>
      </div>
      <div class="scroll-hint" id="scrollHint">
        <span class="hint-text">Desliza hacia abajo</span>
        <span class="hint-arrow">‚ñº</span>
      </div>
    `;

      host.appendChild(wrap);

      const scrollHint = wrap.querySelector('#scrollHint');

      // Al hacer scroll, escondemos el hint y mostramos el contenido principal
      let mainShown = false;
      window.addEventListener('scroll', () => {
        if (scrollHint && window.scrollY > 40) {
          scrollHint.classList.add('hide');
        }
        if (!mainShown && window.scrollY > 5) {
          mainShown = true;
          document.body.classList.add('show-main'); // activa CSS para mostrar .wrap
        }
      });

      const total = Math.max(5, passes);
      const dots = wrap.querySelector('#dots');
      for (let i = 1; i <= total; i++) {
        const d = document.createElement('span');
        d.className = 'dot' + (i <= passes ? ' filled' : '');
        dots.appendChild(d);
      }
      wrap.querySelector('#whoname').textContent = name;
    })();
  </script>

  <script>
    // Bot√≥n "Agregar al calendario" ‚Äî genera .ics directamente
    (function () {
      const btn = document.getElementById('addToCalBtn');
      if (!btn) return;
      const title = 'Boda de Karen & Sergio';
      const description = 'Con alegr√≠a, invitamos a celebrar el comienzo de nuestra vida juntos.\\nM√°s detalles en la invitaci√≥n.';
      const location = 'Por definir';
      const startDate = '20260711';
      const endDate = '20260712';
      const pad = (n) => String(n).padStart(2, '0');
      const now = new Date();
      const dtstamp = `${now.getUTCFullYear()}${pad(now.getUTCMonth() + 1)}${pad(now.getUTCDate())}T${pad(now.getUTCHours())}${pad(now.getUTCMinutes())}${pad(now.getUTCSeconds())}Z`;
      btn.addEventListener('click', function () {
        const uid = `boda-karen-sergio-${startDate}@invitacion.local`;
        const lines = [
          'BEGIN:VCALENDAR', 'VERSION:2.0', 'PRODID:-//Karen & Sergio//Boda//ES', 'CALSCALE:GREGORIAN', 'METHOD:PUBLISH', 'BEGIN:VEVENT',
          `UID:${uid}`, `DTSTAMP:${dtstamp}`, `DTSTART;VALUE=DATE:${startDate}`, `DTEND;VALUE=DATE:${endDate}`, `SUMMARY:${title}`, `DESCRIPTION:${description}`, `LOCATION:${location}`, 'END:VEVENT', 'END:VCALENDAR'
        ];
        const ics = lines.join('\r\n');
        const blob = new Blob([ics], { type: 'text/calendar;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = 'Boda-Karen-Sergio-2026.ics';
        document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      });
    })();
  </script>

  <script>
    // Contador al 11 de julio de 2026
    (function () {
      const target = new Date('2026-07-11T00:00:00');
      const d = document.getElementById('d');
      const h = document.getElementById('h');
      const m = document.getElementById('m');
      const s = document.getElementById('s');
      function tick() {
        const now = new Date();
        let diff = target - now; if (diff < 0) diff = 0;
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const mins = Math.floor((diff / (1000 * 60)) % 60);
        const secs = Math.floor((diff / 1000) % 60);
        d.textContent = String(days);
        h.textContent = String(hours).padStart(2, '0');
        m.textContent = String(mins).padStart(2, '0');
        s.textContent = String(secs).padStart(2, '0');
      }
      tick(); setInterval(tick, 1000);
    })();
  </script>

  <script>
    // Revelar elementos .reveal al entrar al viewport
    (function () {
      const io = new IntersectionObserver((entries) => {
        entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('show'); io.unobserve(e.target); } });
      }, { threshold: 0.15 });
      document.querySelectorAll('.reveal').forEach(el => io.observe(el));
    })();
  </script>

  <script>
    // Men√∫ hamburguesa
    (function () {
      const btn = document.getElementById('hamburger');
      const overlay = document.getElementById('menuOverlay');
      const toggle = () => {
        const open = overlay.classList.toggle('open');
        btn.classList.toggle('active', open);
        btn.setAttribute('aria-expanded', String(open));
        document.body.style.overflow = open ? 'hidden' : '';
      };
      btn.addEventListener('click', toggle);
      overlay.addEventListener('click', (e) => { if (e.target === overlay) toggle(); });
      overlay.querySelectorAll('a').forEach(a => a.addEventListener('click', () => toggle()));
    })();
  </script>

  <script>
    // Efecto "pintado" del bot√≥n Liverpool cuando entra por primera vez al viewport
    (function () {
      const btn = document.getElementById('btnLiverpool');
      if (!btn) return;
      if (btn.dataset.paintInit === '1') return; btn.dataset.paintInit = '1';
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) btn.style.transition = 'none';
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => { if (entry.isIntersecting) { requestAnimationFrame(() => setTimeout(() => btn.classList.add('paint'), 80)); observer.disconnect(); } });
      }, { root: null, rootMargin: '0px 0px -10% 0px', threshold: 0.25 });
      observer.observe(btn);
    })();
  </script>

  <script>
    const CSV_PATH = 'SOS_SERVICIOS_BODA_KYS.csv';


    fetch(CSV_PATH)
      .then(res => res.text())
      .then(text => {

        parseCSV(text);
      })
      .catch(err => console.error('‚ùå Error cargando CSV:', err));

    function parseCSV(text) {
      const lines = text
        .split('\n')
        .map(l => l.trim())
        .filter(l => l && !l.match(/^,+$/)); // elimina ,,,,


      const data = {};
      let currentCategory = null;

      lines.forEach((line, index) => {
        const cols = splitCSV(line);


        // DETECTAR CATEGOR√çA (encabezado)
        if (
          cols.length >= 2 &&
          cols[1].toLowerCase() === 'instagram'
        ) {
          currentCategory = cols[0].trim();
          data[currentCategory] = [];
          return;
        }

        // DETECTAR SERVICIO
        if (
          currentCategory &&
          cols[0] &&
          (cols[2]?.includes('52') || cols[1])
        ) {
          data[currentCategory].push({
            nombre: cols[0],
            instagram: cols[1] || '',
            whatsapp: cols[2] || '',
            domicilio: cols[3] || '',
            link: cols[4] || ''
          });

        }
      });

      renderServicios(data);
    }

    /* Parser CSV con soporte para comillas */
    function splitCSV(line) {
      const result = [];
      let current = '';
      let inQuotes = false;

      for (let i = 0; i < line.length; i++) {
        const char = line[i];

        if (char === '"') {
          inQuotes = !inQuotes;
        } else if (char === ',' && !inQuotes) {
          result.push(current.trim());
          current = '';
        } else {
          current += char;
        }
      }

      result.push(current.trim());
      return result;
    }

    function renderServicios(data) {
      const list = document.getElementById('servicesList');
      list.innerHTML = '';

      Object.entries(data).forEach(([categoria, servicios]) => {
        if (!servicios.length) return;

        const li = document.createElement('li');
        li.innerHTML = `
          <div class="service-row">
            <span>${categoria.toUpperCase()}</span>
            <span class="service-plus">+</span>
          </div>
          <div class="service-desc"></div>

    `;

        const desc = li.querySelector('.service-desc');

        servicios.forEach((s, i) => {
          desc.innerHTML += `
        <p><strong>${s.nombre}</strong></p>
        ${s.instagram ? `<p>Instagram: @${s.instagram}</p>` : ''}
        ${s.whatsapp ? `
  <p>
    WhatsApp:
    <a
  class="whatsapp-link"
  href="https://wa.me/${formatWhatsAppLink(s.whatsapp)}"
  target="_blank"
  rel="noopener"
>
  ${formatPhone(s.whatsapp)}
</a>

  </p>
` : ''}

        ${s.domicilio ? `<p>${s.domicilio}</p>` : ''}
        ${s.link ? `<a class="hotel-map-btn" href="${s.link}" target="_blank">Ver perfil</a>` : ''}
        ${i < servicios.length - 1 ? '<hr>' : ''}
      `;
        });

        list.appendChild(li);
      });

      activarServiciosAcordeon();
    }

    function activarServiciosAcordeon() {
      const serviceRows = document.querySelectorAll('.service-row');

      serviceRows.forEach(row => {
        row.onclick = () => {
          const desc = row.nextElementSibling;

          // üîí Cerrar otros servicios abiertos
          document.querySelectorAll('.service-desc.open').forEach(openDesc => {
            if (openDesc !== desc) {
              openDesc.classList.remove('open');
              openDesc.previousElementSibling.classList.remove('open');
            }
          });

          // üîÅ Toggle del actual
          row.classList.toggle('open');
          desc.classList.toggle('open');
        };
      });
    }



    function formatPhone(phone) {
      return phone.replace(/\s+/g, ' ').trim();
    }

    function formatWhatsAppLink(phone) {
      return phone.replace(/\D/g, '');
    }

  </script>


</body>

</html>