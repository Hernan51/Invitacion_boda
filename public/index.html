<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boda Karen & Sergio — 11 • 07 • 2026</title>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;600&family=Poppins:wght@300;400;600&display=swap"
    rel="stylesheet">

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.body.classList.add('intro-active');
    });
  </script>
  <script>
    // Forzar que, al recargar, la página comience desde arriba
    (function () {
      // Evita que el navegador restaure la posición de scroll automáticamente
      if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual'; // MDN: History.scrollRestoration
      }

      // Si se recarga estando en una ancla (ej. #ceremonia), limpiamos el hash
      if (location.hash) {
        history.replaceState(null, '', location.pathname + location.search);
      }

      // Asegura el scroll al tope en distintos escenarios
      window.addEventListener('load', function () {
        window.scrollTo(0, 0);
      });
      window.addEventListener('pageshow', function (e) {
        // Cuando la página viene del bfcache (navegadores móviles/safari)
        if (e.persisted) {
          window.scrollTo(0, 0);
        }
      });
      window.addEventListener('beforeunload', function () {
        // Algunos navegadores respetan esto durante el refresh
        window.scrollTo(0, 0);
      });
    })();
  </script>
  <style>
    .invite-card {
      max-width: 760px;
      margin: 18px auto 8px;
      background: #fff;
      border: 1px solid #00000012;
      border-radius: 16px;
      box-shadow: 0 14px 36px #00000014;
      overflow: hidden
    }

    .invite-head {
      position: relative;
      background: #faf7ff
    }

    .invite-photo {
      display: block;
      width: 100%;
      height: auto;
      object-fit: cover;
      filter: grayscale(14%)
    }

    .invite-names {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 10px;
      text-align: center;
      font-family: 'Playfair Display', serif;
      letter-spacing: .22em;
      color: #3e3e3e;
    }

    .invite-names .big {
      font-family: 'Poppins', sans-serif;
      font-weight: 300;
      font-size: clamp(20px, 4vw, 26px);
      color:white;
    }

    .invite-names .date {
      margin-top: 6px;
      font-size: 12px;
      opacity: .8;
      color:white;
    }

    .invite-body {
      padding: 22px;
      display: grid;
      place-items: center
    }

    .envelope-box {
      width: min(520px, 92%);
      aspect-ratio: 16/9;
      background: #c16c52;
      border-radius: 12px;
      position: relative;
      box-shadow: inset 0 10px 20px rgba(0, 0, 0, .15)
    }

    

    .envelope-seal {
      position: absolute;
      left: 50%;
      top: 54%;
      transform: translate(-50%, -50%);
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: #c27a58;
      box-shadow: inset 0 6px 10px rgba(255, 255, 255, .5), inset 0 -8px 14px rgba(0, 0, 0, .28), 0 6px 16px rgba(0, 0, 0, .25);
      display: grid;
      place-items: center;
      color: #fff;
      font-weight: 700;
      font-family: 'Playfair Display', serif
    }

    .reserve {
      margin: 14px 0 6px 0;
      text-align: center;
      font-size: 13px;
      color: #666;
      letter-spacing: .12em
    }

    .dots {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 6px 0 2px
    }

    .dot {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid #e3dede;
      background: #fff
    }

    .dot.filled {
      background: #c16c52;
      border-color: #c16c52
    }

    .who {
      text-align: center;
      margin-top: 8px;
      font-family: 'Poppins', sans-serif;
      font-weight: 600
    }

    :root {
      /* Paleta pastel inspirada en acuarela */
      --bg-cream: #fff8ef;
      --pastel-rose: #ffd6e0;
      --pastel-peach: #ffe5b4;
      --pastel-mint: #caffbf;
      --pastel-sky: #a0c4ff;
      --pastel-lav: #e6d6ff;
      --ink: #4b4b4b;
      --ink-soft: #6a6a6a;
      --card: #ffffffcc;
      --shadow: 0 10px 30px rgba(0, 0, 0, .08);
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      margin: 0;
      padding: 0;
      color: var(--ink);
      background:
        radial-gradient(1200px 800px at -10% -10%, var(--pastel-rose) 0%, transparent 60%),
        radial-gradient(1200px 900px at 110% 0%, var(--pastel-sky) 0%, transparent 60%),
        radial-gradient(900px 700px at 100% 110%, var(--pastel-mint) 0%, transparent 60%),
        radial-gradient(900px 700px at 0% 110%, var(--pastel-peach) 0%, transparent 60%),
        var(--bg-cream);
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height: 1.6;
    }

    a {
      color: inherit;
      text-decoration: none
    }

    img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 14px
    }

    html {
      scroll-behavior: smooth;
    }

    .wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 28px 20px 80px;
      opacity: 1;
      /* visible por defecto */
      transition: opacity .6s ease;
      /* desvanecimiento al mostrar */
    }

    body.intro-active .wrap {
      opacity: 0;
    }

    /* HERO */
    header.hero {
      text-align: center;
      padding: 64px 20px 32px;
    }

    .names {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(48px, 8vw, 84px);
      line-height: 1.05;
      color: #3e3e3e;
      text-shadow: 0 2px 0 #ffffffa0;
    }

    .amp {
      opacity: .7
    }

    .date {
      margin-top: 10px;
      font-family: 'Playfair Display', serif;
      font-weight: 600;
      letter-spacing: .2em;
      font-size: clamp(14px, 2.5vw, 18px);
      color: #555;
    }

    .tagline {
      margin-top: 10px;
      color: #6b6b6b;
      font-size: 16px;
    }

    /* Contador */
    .countdown {
      margin: 26px auto 0;
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .cd-box {
      background: var(--card);
      backdrop-filter: blur(4px);
      border: 1px solid #ffffffaa;
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 16px 18px;
      min-width: 96px;
    }

    .cd-num {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      font-weight: 600;
    }

    .cd-lbl {
      font-size: 12px;
      opacity: .75;
      letter-spacing: .12em;
      text-transform: uppercase;
    }

    /* Secciones */
    section {
      margin-top: 44px
    }

    .card {
      background: var(--card);
      backdrop-filter: blur(4px);
      border: 1px solid #ffffffaa;
      border-radius: 16px;
      box-shadow: var(--shadow);
      padding: 22px;
    }

    .section-title {
      font-family: 'Playfair Display', serif;
      font-weight: 600;
      font-size: clamp(22px, 3.8vw, 30px);
      margin: 0 0 14px 0;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 18px;
    }

    @media (min-width: 760px) {
      .grid-2 {
        grid-template-columns: 1.1fr 1fr
      }

      .grid-3 {
        grid-template-columns: repeat(3, 1fr)
      }
    }

    .pill {
      display: inline-block;
      padding: 8px 14px;
      border-radius: 999px;
      background: #ffffff;
      border: 1px dashed #e9e4ff;
      font-size: 13px;
    }

    .btn {
      display: inline-block;
      margin-top: 10px;
      padding: 12px 18px;
      border-radius: 12px;
      border: 0;
      background: linear-gradient(135deg, var(--pastel-lav), var(--pastel-sky));
      color: #2c2c2c;
      font-weight: 600;
      box-shadow: var(--shadow);
      transition: transform .15s ease, box-shadow .15s ease, opacity .2s ease;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 36px rgba(0, 0, 0, .12)
    }

    .btn:active {
      transform: translateY(0) scale(.98)
    }

    /* Add to Calendar block */
    .add-to-cal {
      margin-top: 14px;
      display: inline-flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    .btn-ghost {
      background: transparent;
      border: 2px dashed rgba(0, 0, 0, .15);
      color: #3e3e3e;
    }

    .btn-ghost:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 36px rgba(0, 0, 0, .08);
    }

    @media (max-width: 580px) {
      .add-to-cal {
        gap: 8px;
      }
    }

    /* Footer */
    footer {
      text-align: center;
      color: #666;
      font-size: 14px;
      margin-top: 56px;
    }

    /* Mini detalles */
    .watermark {
      border-radius: 16px;
      overflow: hidden;
    }

    .fade-image {
      position: relative;
      display: inline-block;
      width: 100%;
      border-radius: 16px;
      overflow: hidden;
    }

    .fade-image img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 16px;
    }

    .fade-image::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 16px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0) 75%, rgba(255, 248, 239, 1) 100%);
      pointer-events: none;
    }

    .list {
      margin: 0;
      padding-left: 18px;
    }

    /* Sección apilada: imagen arriba, info abajo */
    .section-stack {
      display: grid;
      gap: 18px;
      margin-top: 44px;
      /* mantiene consistencia con otras secciones */
    }

    /* Animación “reveal” en scroll */
    .reveal {
      opacity: 0;
      transform: translateY(16px);
      transition: opacity .8s ease, transform .8s ease;
      will-change: opacity, transform;
    }

    .reveal.show {
      opacity: 1;
      transform: none;
    }

    /* Intro con campanas */
    body.intro-active {
      overflow: hidden;
    }

    #intro {
      position: fixed;
      inset: 0;
      background:
        linear-gradient(180deg, rgba(255, 248, 239, .98), rgba(255, 248, 239, .92)),
        radial-gradient(1100px 800px at 12% 0%, var(--pastel-rose) 0%, transparent 60%),
        radial-gradient(1100px 900px at 88% 100%, var(--pastel-sky) 0%, transparent 60%),
        var(--bg-cream);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #intro .stage {
      position: relative;
      width: min(900px, 86vw);
      height: min(420px, 60vh);
    }

    #intro .bell {
      position: absolute;
      top: 4%;
      width: min(160px, 28vw);
      height: auto;
      transform-origin: 50% 10%;
      animation: swing 1.2s ease-in-out infinite;
      filter: drop-shadow(0 8px 20px rgba(0, 0, 0, .12));
    }

    #intro .bell.left {
      left: 6%;
    }

    #intro .bell.right {
      right: 6%;
      animation-delay: .2s;
    }

    #intro .headline {
      position: absolute;
      inset: auto 0 8% 0;
      text-align: center;
      font-family: 'Great Vibes', cursive;
      font-size: clamp(42px, 10vw, 90px);
      color: #3e3e3e;
      text-shadow: 0 2px 0 #ffffffa0;
      opacity: 0;
      transform: translateY(10px) scale(.98);
      animation: headlineIn .9s ease forwards 1.2s;
    }

    #intro .insta {
      position: absolute;
      left: 50%;
      top: 17%;
      /* ⬆️ súbela (antes 52%). Prueba 38–45% a tu gusto */
      transform: translate(-50%, -50%);
      width: min(320px, 52vw);
      aspect-ratio: 1 / 1;
      border-radius: 50%;
      /* ⭕ hace el contenedor circular */
      overflow: hidden;
      /* recorta la imagen al círculo */
      background: #fff;
      border: 1px solid #ffffffaa;
      box-shadow: 0 10px 30px rgba(0, 0, 0, .12);
      z-index: 1;
    }

    #intro .insta img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* elevar el titular por encima de la foto */
    #intro .headline {
      z-index: 2;
    }

    @keyframes swing {
      0% {
        transform: rotate(-16deg);
      }

      50% {
        transform: rotate(16deg);
      }

      100% {
        transform: rotate(-16deg);
      }
    }

    @keyframes headlineIn {
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes fadeOut {
      to {
        opacity: 0;
        visibility: hidden;
      }
    }

    /* cuando la página esté lista, mostramos el contenido */
    body.page-ready .wrap {
      opacity: 1;
    }

    /* al cerrar la intro */
    #intro.out {
      animation: fadeOut .7s ease forwards;
    }

    /* Topbar con logo + hamburguesa */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .topbar-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1100px;
      margin: 0 auto;
      padding: 12px 16px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: #3e3e3e;
    }

    .logo img {
      width: 40px;
      height: 40px;
      object-fit: contain;
      border-radius: 8px;
    }

    .logo span {
      font-family: 'Playfair Display', serif;
      font-weight: 600;
      font-size: 18px;
    }

    .hamburger {
      width: 44px;
      height: 36px;
      border: 0;
      background: transparent;
      cursor: pointer;
      position: relative;
    }

    .hamburger .bar {
      position: absolute;
      left: 8px;
      right: 8px;
      height: 2px;
      background: #3e3e3e;
      transition: transform .25s ease, opacity .25s ease;
    }

    .hamburger .bar:nth-child(1) {
      top: 10px;
    }

    .hamburger .bar:nth-child(2) {
      top: 17px;
    }

    .hamburger .bar:nth-child(3) {
      top: 24px;
    }

    .hamburger.active .bar:nth-child(1) {
      transform: translateY(7px) rotate(45deg);
    }

    .hamburger.active .bar:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active .bar:nth-child(3) {
      transform: translateY(-7px) rotate(-45deg);
    }

    /* Overlay del índice */
    #menuOverlay {
      position: fixed;
      inset: 0;
      z-index: 1500;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(255, 248, 239, .94);
      backdrop-filter: blur(4px);
    }

    #menuOverlay.open {
      display: flex;
      animation: fadeIn .25s ease both;
    }

    @keyframes fadeIn {
      from {
        opacity: 0
      }

      to {
        opacity: 1
      }
    }

    .menu {
      text-align: center;
    }

    .menu a {
      display: block;
      margin: 10px 0;
      font-family: 'Playfair Display', serif;
      font-size: 26px;
      color: #3e3e3e;
      text-decoration: none;
    }

    .menu a small {
      display: block;
      font-family: 'Poppins', sans-serif;
      font-size: 12px;
      color: #6a6a6a;
      letter-spacing: .12em;
      text-transform: uppercase;
    }

    /* ===== Ajustes para móvil ===== */
    @media (max-width: 580px) {

      /* Layout general */
      .wrap {
        padding: 20px 14px 64px;
      }

      header.hero {
        padding: 44px 10px 18px;
      }

      /* Topbar más compacta */
      .topbar-inner {
        padding: 10px 12px;
      }

      .logo img {
        width: 34px;
        height: 34px;
      }

      .logo span {
        font-size: 16px;
      }

      /* Intro */
      #intro .stage {
        width: 94vw;
        height: 68vh;
        /* más alto para respirar en móvil */
      }

      #intro .bell {
        top: 2%;
        width: 25vw;
        /* campanas más pequeñas */
        filter: drop-shadow(0 6px 16px rgba(0, 0, 0, .12));
      }

      #intro .bell.left {
        left: 2%;
      }

      #intro .bell.right {
        right: 2%;
      }

      #intro .insta {
        width: min(260px, 64vw);
        /* foto circular más chica en móvil */
        top: 47%;
        /* un poco más abajo para no chocar con la barra del sistema */
      }

      #intro .headline {
        inset: auto 0 6% 0;
        /* sube el título un poco */
        font-size: clamp(36px, 14vw, 64px);
      }

      /* Títulos y tipografías */
      .names {
        font-size: clamp(40px, 9vw, 72px);
      }

      .date {
        letter-spacing: .16em;
        font-size: 14px;
      }

      .tagline {
        font-size: 14px;
      }

      /* Contador */
      .countdown {
        gap: 8px;
      }

      .cd-box {
        padding: 12px 12px;
        min-width: 78px;
      }

      .cd-num {
        font-size: 24px;
      }

      .cd-lbl {
        font-size: 11px;
        letter-spacing: .1em;
      }

      /* Grids y tarjetas */
      .grid {
        gap: 14px;
      }

      .card {
        padding: 16px;
      }

      .section-title {
        font-size: clamp(20px, 5.2vw, 26px);
      }

      .btn {
        padding: 12px 16px;
        font-size: 14px;
      }

      /* Menú overlay */
      .menu a {
        font-size: 22px;
        margin: 8px 0;
      }

      .menu a small {
        font-size: 11px;
      }

      /* Imágenes con fade y marca de agua */
      .fade-image,
      .watermark {
        border-radius: 14px;
      }

      .fade-image img {
        border-radius: 14px;
      }

      /* Lista del itinerario un poco más aireada */
      #itinerario .list li {
        margin-bottom: 6px;
      }
    }

    :root {
      /* ...lo que ya tienes... */
      --liverpool: #e1007a;
      /* Magenta Liverpool */
    }

    /* Botón Liverpool: empieza transparente y se “pinta” */
    .btn-liverpool {
      position: relative;
      overflow: hidden;
      background: none !important;
      /* quita el gradiente general del .btn */
      border: 2px solid var(--liverpool);
      color: var(--liverpool);
      padding: 12px 18px;
      /* asegura padding igual al .btn */
      transition: color .3s ease, box-shadow .15s ease, transform .15s ease;
    }

    .btn-liverpool::before {
      content: "";
      position: absolute;
      inset: 0;
      background: var(--liverpool);
      transform: translateX(-100%);
      transition: transform .6s ease;
      z-index: 0;
    }

    .btn-liverpool span {
      position: relative;
      z-index: 1;
      /* texto por encima del “pintado” */
    }

    /* Cuando se active la animación de primera vez */
    .btn-liverpool.paint {
      border-color: var(--liverpool);
      color: #fff;
    }

    .btn-liverpool.paint::before {
      transform: translateX(0);
    }

    /* Hover/press siguen funcionando bonito */
    .btn-liverpool:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 36px rgba(0, 0, 0, .12);
    }

    .btn-liverpool:active {
      transform: translateY(0) scale(.98);
    }

    /* ========= Intro tipo sobre ========= */
    #intro {
      position: fixed;
      inset: 0;
      background:
        linear-gradient(180deg, rgba(255, 248, 239, .98), rgba(255, 248, 239, .92)),
        radial-gradient(1100px 800px at 12% 0%, var(--pastel-rose) 0%, transparent 60%),
        radial-gradient(1100px 900px at 88% 100%, var(--pastel-sky) 0%, transparent 60%),
        var(--bg-cream);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    #intro .stage {
      position: relative;
      width: min(640px, 88vw);
      height: min(420px, 64vh);
      display: grid;
      place-items: center;
      perspective: 1200px;
      /* para la tapa 3D */
    }

    /* Sobre base */
    .envelope {
      position: relative;
      width: min(520px, 82vw);
      aspect-ratio: 4 / 3;
      transform-style: preserve-3d;
      filter: drop-shadow(0 16px 36px rgba(0, 0, 0, .16));
    }

    /* Colores sutiles acorde a tu paleta */
    .envelope__back,
    .envelope__front,
    .envelope__flap {
      position: absolute;
      inset: 0;
      border-radius: 14px;
    }

    .envelope__back {
      background: #fff;
      border: 1px solid #ffffffaa;
    }

    /* Triángulos delanteros del sobre */
    .envelope__front {
      background:
        linear-gradient(to top right, transparent 50%, #fff 50%) top left / 50% 50% no-repeat,
        linear-gradient(to top left, transparent 50%, #fff 50%) top right / 50% 50% no-repeat,
        linear-gradient(to bottom, #fff 50%, transparent 50%) bottom / 100% 50% no-repeat;
      border: 1px solid #ffffffaa;
      border-top: 0;
      border-radius: 0 0 14px 14px;
      transform: translateZ(2px);
    }

    /* Tapa (flap) superior — abre */
    .envelope__flap {
      border-radius: 14px 14px 0 0;
      transform-origin: 50% 0%;
      background:
        linear-gradient(to bottom, #fff 0%, #fff 60%, rgba(255, 255, 255, .96) 100%);
      border: 1px solid #ffffffaa;
      border-bottom: 0;
      clip-path: polygon(0 0, 100% 0, 50% 70%, 0 0);
      /* forma de triángulo suave */
      transform: rotateX(0deg) translateZ(3px);
      animation: flapOpen 1.2s ease-out 0.8s forwards;
    }

    /* Tarjeta interior que se asoma */
    .envelope__card {
      position: absolute;
      left: 6%;
      right: 6%;
      top: 10%;
      bottom: 18%;
      background: var(--card);
      border: 1px solid #ffffffaa;
      border-radius: 12px;
      transform: translateZ(1px) translateY(10%);
      opacity: 0;
      overflow: hidden;
      animation: cardUp 1.1s ease-out 1.6s forwards;
    }

    .card-inner {
      height: 100%;
      display: grid;
      place-items: center;
      text-align: center;
      padding: 16px;
      background:
        radial-gradient(600px 320px at 50% 110%, var(--pastel-rose) 0%, transparent 60%),
        radial-gradient(500px 300px at -20% -10%, var(--pastel-sky) 0%, transparent 60%),
        #fff;
    }

    .card-line {
      font-family: 'Playfair Display', serif;
      color: #3e3e3e;
    }

    .card-names {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(34px, 7vw, 60px);
      line-height: 1.1;
    }

    .card-date {
      letter-spacing: .18em;
      font-size: clamp(12px, 2.2vw, 14px);
      color: #666;
      margin-top: 4px;
    }

    .card-title {
      margin-top: 8px;
      font-weight: 600;
      font-size: clamp(16px, 3vw, 18px);
      color: #4b4b4b;
    }

    /* Hint táctil */
    .tap-hint {
      position: absolute;
      bottom: 6%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 13px;
      color: #777;
      background: #ffffffcc;
      border: 1px solid #ffffffaa;
      padding: 6px 10px;
      border-radius: 999px;
      opacity: 0;
      animation: hintIn .6s ease 2.1s forwards, hintOut .6s ease 3.8s forwards;
    }

    /* Animaciones */
    @keyframes flapOpen {
      0% {
        transform: rotateX(0deg) translateZ(3px);
      }

      100% {
        transform: rotateX(180deg) translateZ(3px);
      }
    }

    @keyframes cardUp {
      0% {
        transform: translateZ(1px) translateY(10%);
        opacity: 0;
      }

      100% {
        transform: translateZ(1px) translateY(-28%);
        opacity: 1;
      }
    }

    @keyframes hintIn {
      to {
        opacity: 1;
      }
    }

    @keyframes hintOut {
      to {
        opacity: 0;
      }
    }

    /* Respeto a reduced motion */
    @media (prefers-reduced-motion: reduce) {

      .envelope__flap,
      .envelope__card,
      .tap-hint {
        animation: none !important;
      }

      .envelope__card {
        opacity: 1;
        transform: none;
      }

      .tap-hint {
        opacity: 1;
      }
    }

    /* Ajustes responsive */
    @media (max-width: 580px) {
      #intro .stage {
        width: 94vw;
        height: 68vh;
      }

      .envelope {
        width: 90vw;
      }
    }

    /* ====== Envelope fullscreen width ====== */

    /* La “escena” ocupa toda la ventana */
    #intro .stage {
      width: 100vw;
      height: 100vh;
      padding: 6vmin;
      /* respirito en bordes */
      display: grid;
      place-items: center;
      perspective: 1200px;
      box-sizing: border-box;
    }

    /* El sobre ahora usa todo el ancho disponible */
    .envelope {
      width: 100%;
      max-width: none;
      /* sin límite */
      aspect-ratio: 4 / 3;
      /* forma agradable de sobre */
      height: auto;
      filter: drop-shadow(0 18px 42px rgba(0, 0, 0, .16));
    }

    /* Ajustes de capas para que escalen con el nuevo tamaño */
    .envelope__back,
    .envelope__front,
    .envelope__flap,
    .envelope__card {
      border-radius: clamp(10px, 1.6vmin, 18px);
    }

    /* Tarjeta interior: márgenes relativos al tamaño del sobre */
    .envelope__card {
      left: 6%;
      right: 6%;
      top: 10%;
      bottom: 18%;
    }

    /* Texto dentro de la tarjeta: escala fluida */
    .card-names {
      font-size: clamp(28px, 7vmin, 64px);
    }

    .card-date {
      font-size: clamp(12px, 1.8vmin, 16px);
    }

    .card-title {
      font-size: clamp(14px, 2.2vmin, 20px);
    }

    /* Hint táctil un poco más arriba en pantallas muy anchas */
    .tap-hint {
      bottom: 4vmin;
    }

    /* Respeto a móviles con notch/safe-area */
    @supports (padding: max(0px)) {
      #intro .stage {
        padding-left: max(6vmin, env(safe-area-inset-left));
        padding-right: max(6vmin, env(safe-area-inset-right));
        padding-top: max(6vmin, env(safe-area-inset-top));
        padding-bottom: max(6vmin, env(safe-area-inset-bottom));
      }
    }

    /* Opcional: en pantallas ultrapanorámicas, que no quede “bajito” */
    @media (min-aspect-ratio: 16/9) {
      .envelope {
        aspect-ratio: 16 / 9;
      }

      /* adopta formato más apaisado */
    }

    /* ===== Envelope: tamaño balanceado (que siempre quepa) ===== */
    #intro .stage {
      /* usa toda la pantalla, pero con un margen respirable configurable */
      --pad: 6vmin;
      width: 100vw;
      height: 100vh;
      padding: var(--pad);
      display: grid;
      place-items: center;
      box-sizing: border-box;
      perspective: 1200px;
    }

    /* Mantén la proporción del sobre y limita por ancho y alto */
    .envelope {
      aspect-ratio: 4 / 3;
      height: auto;
      /* 1) límite por ancho de viewport y por un máximo cómodo de desktop */
      width: min(92vw, 960px);
      filter: drop-shadow(0 16px 36px rgba(0, 0, 0, .16));
    }

    /* 2) si la pantalla es muy ancha (poca altura), limita por altura disponible */
    @media (min-aspect-ratio: 4/3) {
      .envelope {
        /* calcula el ancho máximo según la altura útil (restando padding) */
        width: min(92vw,
            calc((100vh - (var(--pad) * 2)) * 4 / 3),
            960px);
      }
    }

    /* Bordes fluidos con el nuevo tamaño */
    .envelope__back,
    .envelope__front,
    .envelope__flap,
    .envelope__card {
      border-radius: clamp(10px, 1.4vmin, 16px);
    }

    /* Tarjeta interior: márgenes proporcionales */
    .envelope__card {
      left: 6%;
      right: 6%;
      top: 10%;
      bottom: 18%;
    }

    /* Tipografías dentro de la tarjeta: escalado agradable */
    .card-names {
      font-size: clamp(28px, 6.2vmin, 56px);
    }

    .card-date {
      font-size: clamp(12px, 1.6vmin, 16px);
    }

    .card-title {
      font-size: clamp(14px, 2vmin, 20px);
    }

    /* Hint un poco más arriba */
    .tap-hint {
      bottom: max(4vmin, 24px);
    }

    /* En móviles, reduce el padding para que el sobre crezca un poco más */
    @media (max-width: 580px) {
      #intro .stage {
        --pad: 4vmin;
      }
    }

    /* ===== Envelope tamaño balanceado y centrado ===== */
    #intro .stage {
      width: 100vw;
      height: 100vh;
      display: grid;
      place-items: center;
      perspective: 1200px;
      padding: 5vmin;
      box-sizing: border-box;
    }

    /* Envelope ocupa aprox. 70–85% del ancho, ajusta según gusto */
    .envelope {
      width: min(85vw, 720px);
      aspect-ratio: 4 / 3;
      filter: drop-shadow(0 12px 32px rgba(0, 0, 0, .15));
    }

    /* En pantallas muy anchas (relación > 16:9), limitar por altura */
    @media (min-aspect-ratio: 16/9) {
      .envelope {
        width: auto;
        height: min(80vh, 600px);
      }
    }

    /* Ajustes visuales del contenido */
    .envelope__card {
      left: 8%;
      right: 8%;
      top: 12%;
      bottom: 20%;
    }

    /* Texto centrado y más grande */
    .card-names {
      font-size: clamp(34px, 6vmin, 64px);
    }

    .card-date {
      font-size: clamp(12px, 1.6vmin, 16px);
    }

    .card-title {
      font-size: clamp(16px, 2.2vmin, 20px);
    }

    /* Hint */
    .tap-hint {
      bottom: 5vmin;
    }

    /* En móviles el sobre crece un poco más */
    @media (max-width: 600px) {
      .envelope {
        width: 92vw;
        aspect-ratio: 4 / 3;
      }
    }

    /* ===== La tarjeta sale por ENCIMA del sobre ===== */

    /* Permite que la tarjeta se vea fuera del contenedor */
    .envelope {
      overflow: visible;
      /* antes podía recortarse */
      transform-style: preserve-3d;
    }

    /* Orden de apilado (back < front < flap < card) */
    .envelope__back {
      z-index: 0;
    }

    .envelope__front {
      z-index: 1;
    }

    .envelope__flap {
      z-index: 2;
    }

    /* la tapa abre hacia atrás con rotateX */
    .envelope__card {
      z-index: 4;
      /* la tarjeta por encima de todo */
      transform: translateZ(24px) translateY(10%);
      /* “fuera” del sobre */
      box-shadow: 0 14px 36px rgba(0, 0, 0, .18);
      /* sombra marcada */
    }

    /* La animación ahora sube MÁS y hace un leve pop */
    @keyframes cardUp {
      0% {
        transform: translateZ(24px) translateY(10%) scale(0.98);
        opacity: 0;
      }

      60% {
        transform: translateZ(24px) translateY(-34%) scale(1.015);
        opacity: 1;
      }

      100% {
        transform: translateZ(24px) translateY(-40%) scale(1.01);
        opacity: 1;
      }
    }

    /* Borde y sombra más definidos para que destaque sobre triángulos del sobre */
    .envelope__card {
      border: 1px solid rgba(0, 0, 0, .06);
      background: #fff;
      /* más sólido que var(--card) */
    }

    /* Sombra suave “pegada” al sobre para reforzar la superposición */
    .envelope__card::after {
      content: "";
      position: absolute;
      left: 8%;
      right: 8%;
      top: -8px;
      height: 22px;
      background: radial-gradient(60% 100% at 50% 0%,
          rgba(0, 0, 0, .18) 0%, rgba(0, 0, 0, 0) 70%);
      filter: blur(6px);
      opacity: .55;
      pointer-events: none;
    }

    /* La tapa abre hacia atrás: un poco de perspectiva ayuda a “separar” */
    @keyframes flapOpen {
      0% {
        transform: rotateX(0deg) translateZ(3px);
      }

      100% {
        transform: rotateX(180deg) translateZ(-2px);
      }

      /* va detrás del plano */
    }

    /* Tipos un pelín más grandes para que se lean enseguida */
    .card-names {
      font-size: clamp(36px, 6.6vmin, 68px);
    }

    .card-title {
      font-size: clamp(16px, 2.4vmin, 22px);
    }

    /* En pantallas muy anchas, sube un poquito más */
    @media (min-aspect-ratio: 16/9) {
      @keyframes cardUp {
        0% {
          transform: translateZ(24px) translateY(10%) scale(0.98);
          opacity: 0;
        }

        60% {
          transform: translateZ(24px) translateY(-36%) scale(1.015);
          opacity: 1;
        }

        100% {
          transform: translateZ(24px) translateY(-44%) scale(1.01);
          opacity: 1;
        }
      }
    }

    /* ==== FORZAR superposición visible de la tarjeta ==== */

    /* 1) Nada recorta al salir */
    #intro {
      overflow: visible !important;
    }

    #intro .stage {
      overflow: visible !important;
    }

    /* 2) El sobre permite que la tarjeta se salga */
    #intro .envelope {
      position: relative;
      overflow: visible !important;
      transform-style: preserve-3d;
    }

    /* 3) Orden de capas: back(0) < front(1) < flap(2) < card(999) */
    #intro .envelope__back {
      position: relative;
      z-index: 0;
    }

    #intro .envelope__front {
      position: relative;
      z-index: 1;
      pointer-events: none;
    }

    #intro .envelope__flap {
      position: relative;
      z-index: 2;
      transform-origin: 50% 0%;
      backface-visibility: hidden;
      /* usar NUEVA animación para evitar conflictos de nombre */
      animation: flapOpenBack 1.2s ease-out 0.8s forwards;
    }

    /* 4) La tarjeta sale por ARRIBA del sobre con sombra marcada */
    #intro .envelope__card {
      position: absolute;
      z-index: 999 !important;
      /* por si acaso */
      transform: translateZ(24px) translateY(12%);
      border: 1px solid rgba(0, 0, 0, .06);
      background: #fff;
      box-shadow: 0 16px 40px rgba(0, 0, 0, .22);
      animation: cardUpPop 1.1s ease-out 1.6s forwards !important;
    }

    /* Sombra pegada al borde superior del sobre para acentuar el solape */
    #intro .envelope__card::after {
      content: "";
      position: absolute;
      left: 8%;
      right: 8%;
      top: -10px;
      height: 26px;
      background: radial-gradient(60% 100% at 50% 0%, rgba(0, 0, 0, .18), transparent 70%);
      filter: blur(6px);
      opacity: .55;
      pointer-events: none;
    }

    /* 5) NUEVAS animaciones (nombres distintos a los anteriores) */
    @keyframes cardUpPop {
      0% {
        transform: translateZ(24px) translateY(12%) scale(.98);
        opacity: 0;
      }

      60% {
        transform: translateZ(24px) translateY(-34%) scale(1.015);
        opacity: 1;
      }

      100% {
        transform: translateZ(24px) translateY(-42%) scale(1.01);
        opacity: 1;
      }
    }

    @keyframes flapOpenBack {
      0% {
        transform: rotateX(0deg) translateZ(3px);
      }

      100% {
        transform: rotateX(180deg) translateZ(-4px);
      }

      /* queda “atrás” */
    }

    /* Tipos un poco mayores para que se noten al salir */
    #intro .card-names {
      font-size: clamp(36px, 6.6vmin, 68px);
    }

    #intro .card-title {
      font-size: clamp(16px, 2.4vmin, 22px);
    }

    /* ========== FIX SOBRE VISIBLE + TARJETA SOBRE-PUESTA ========== */

    /* Escena sin recortes y con perspectiva */
    #intro,
    #intro .stage {
      overflow: visible !important;
      perspective: 1200px;
    }

    /* Sobre: permite que la tarjeta se salga y mantén 3D */
    #intro .envelope {
      position: relative;
      overflow: visible !important;
      transform-style: preserve-3d;
      width: min(85vw, 720px);
      aspect-ratio: 4 / 3;
      filter: drop-shadow(0 12px 32px rgba(0, 0, 0, .15));
    }

    /* 1) DORSO del sobre (base) — un pelín crema para que se note */
    #intro .envelope__back {
      z-index: 0;
      border-radius: 14px;
      background: linear-gradient(180deg, #fff 0%, #fff 60%, #fffaf1 100%);
      border: 1px solid rgba(0, 0, 0, .06);
    }

    /* 2) FRENTE del sobre (los triángulos) — que se vea el borde */
    #intro .envelope__front {
      z-index: 1;
      border-radius: 0 0 14px 14px;
      background:
        linear-gradient(to top right, transparent 50%, #ffffff 50%) top left / 50% 50% no-repeat,
        linear-gradient(to top left, transparent 50%, #ffffff 50%) top right / 50% 50% no-repeat,
        linear-gradient(to bottom, #ffffff 50%, transparent 50%) bottom / 100% 50% no-repeat;
      border-left: 1px solid rgba(0, 0, 0, .06);
      border-right: 1px solid rgba(0, 0, 0, .06);
      border-bottom: 1px solid rgba(0, 0, 0, .06);
      transform: translateZ(2px);
      box-shadow: inset 0 10px 16px rgba(0, 0, 0, .03);
    }

    /* 3) TAPA del sobre — visible, con borde y abre hacia atrás */
    #intro .envelope__flap {
      z-index: 3;
      /* por delante del frente antes de abrir */
      border-radius: 14px 14px 0 0;
      transform-origin: 50% 0%;
      backface-visibility: hidden;
      background: linear-gradient(180deg, #fff, #fff 60%, #fff8ef 100%);
      border: 1px solid rgba(0, 0, 0, .06);
      border-bottom: 0;
      clip-path: polygon(0 0, 100% 0, 50% 70%, 0 0);
      transform: rotateX(0deg) translateZ(4px);
      animation: flapOpenFix 1.1s ease-out 0.6s forwards;
    }

    /* 4) TARJETA — sale por encima con sombra clara */
    #intro .envelope__card {
      z-index: 5;
      /* por encima de tapa y frente */
      position: absolute;
      left: 8%;
      right: 8%;
      top: 12%;
      bottom: 20%;
      background: #fff;
      border: 1px solid rgba(0, 0, 0, .08);
      border-radius: 12px;
      transform: translateZ(20px) translateY(12%) scale(.98);
      box-shadow: 0 14px 36px rgba(0, 0, 0, .18);
      opacity: 0;
      animation: cardUpFix 1.0s cubic-bezier(.2, .6, .2, 1.2) 1.6s forwards;
    }

    /* Sombra pegada al borde del sobre para enfatizar la superposición */
    #intro .envelope__card::after {
      content: "";
      position: absolute;
      left: 8%;
      right: 8%;
      top: -10px;
      height: 24px;
      background: radial-gradient(60% 100% at 50% 0%, rgba(0, 0, 0, .18), transparent 70%);
      filter: blur(6px);
      opacity: .5;
      pointer-events: none;
    }

    /* Texto un poquito más grande para que se lea al salir */
    #intro .card-names {
      font-size: clamp(36px, 6.6vmin, 68px);
    }

    #intro .card-date {
      font-size: clamp(12px, 1.6vmin, 16px);
    }

    #intro .card-title {
      font-size: clamp(16px, 2.4vmin, 22px);
    }

    /* Animaciones con nombres nuevos para evitar choques */
    @keyframes flapOpenFix {
      0% {
        transform: rotateX(0deg) translateZ(4px);
      }

      100% {
        transform: rotateX(180deg) translateZ(-6px);
      }

      /* queda detrás del plano */
    }

    @keyframes cardUpFix {
      0% {
        transform: translateZ(20px) translateY(12%) scale(.98);
        opacity: 0;
      }

      60% {
        transform: translateZ(20px) translateY(-30%) scale(1.01);
        opacity: 1;
      }

      100% {
        transform: translateZ(20px) translateY(-40%) scale(1.005);
        opacity: 1;
      }
    }

    /* Tamaño balanceado en pantallas muy anchas (evita “aplastar” el triángulo) */
    @media (min-aspect-ratio: 16/9) {
      #intro .envelope {
        height: min(78vh, 600px);
        width: auto;
      }
    }

    /* ===== Carta antigua con sello de cera (vertical) ===== */
    .letter-stage {
      width: 100vw;
      height: 100vh;
      padding: 6vmin;
      box-sizing: border-box;
      display: grid;
      place-items: center;
      perspective: 1200px;
      overflow: visible;
    }

    /* ===== CARTA ANTIGUA AJUSTADA A TODO EL ANCHO ===== */

    .letter-stage {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      perspective: 1200px;
      overflow: hidden;
      background: var(--bg-cream, #fff8ef);
    }

    /* Mantiene proporción realista sin deformar */
    .letter {
      position: relative;
      width: 100%;
      max-width: 1400px;
      /* límite en pantallas grandes */
      aspect-ratio: 3 / 2;
      /* proporción carta horizontal */
      height: auto;
      transform-style: preserve-3d;
      overflow: visible;
      filter: drop-shadow(0 20px 50px rgba(0, 0, 0, .2));
    }

    /* Papel visible con borde suave */
    .letter__paper {
      position: absolute;
      inset: 0;
      border-radius: 10px;
      background: linear-gradient(180deg, #fffdf8 0%, #fff7e9 100%);
      border: 1px solid rgba(90, 60, 0, .08);
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, .6),
        inset 0 -40px 80px rgba(137, 90, 0, .05);
    }

    /* Solapa superior (se ve claramente) */
    .paper__flap {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 45%;
      transform-origin: top;
      background: linear-gradient(180deg, #fffdf8 0%, #ffeac9 100%);
      border-bottom: 1px solid rgba(0, 0, 0, .05);
      clip-path: polygon(0 0, 100% 0, 50% 100%, 0 0);
      animation: flapOpenWide 1.4s ease-out .6s forwards;
      z-index: 3;
    }

    /* Cuerpo del papel */
    .paper__body {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      overflow: hidden;
    }

    /* Contenido interior */
    .paper__inner {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      text-align: center;
      background:
        radial-gradient(70% 40% at 80% 0%, var(--pastel-sky, #a0c4ff) 0%, transparent 70%),
        radial-gradient(70% 40% at 20% 100%, var(--pastel-rose, #ffd6e0) 0%, transparent 70%);
      opacity: 0;
      transform: translateY(20%);
      animation: innerRiseWide 1s ease-out 1.8s forwards;
    }

    /* Sello y cinta centrados */
    .letter__ribbon {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: clamp(10px, 1vw, 16px);
      transform: translateX(-50%);
      background: repeating-linear-gradient(180deg,
          rgba(120, 0, 0, .25) 0 8px,
          rgba(120, 0, 0, .18) 8px 16px);
      z-index: 4;
      animation: ribbonFadeWide .5s ease 1.2s forwards;
    }

    .letter__seal {
      position: absolute;
      left: 50%;
      top: 45%;
      transform: translate(-50%, -50%) scale(1);
      width: clamp(60px, 8vmin, 90px);
      height: clamp(60px, 8vmin, 90px);
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ff4b7d 0%, #b0003f 90%);
      box-shadow: 0 10px 24px rgba(0, 0, 0, .25), inset 0 6px 12px rgba(255, 255, 255, .4);
      color: #fff;
      font-family: 'Playfair Display', serif;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      letter-spacing: .08em;
      z-index: 5;
      animation: sealPopWide .6s ease-out .9s forwards,
        sealCrackWide .4s ease-out 1.4s forwards;
    }

    /* Texto interior */
    .inner-names {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(36px, 6vw, 84px);
      color: #3e3e3e;
    }

    .inner-date {
      margin-top: 6px;
      letter-spacing: .2em;
      font-size: clamp(14px, 2vw, 18px);
      color: #666;
    }

    .inner-title {
      margin-top: 14px;
      font-size: clamp(16px, 2vw, 22px);
      font-weight: 600;
      color: #4b4b4b;
    }

    /* ===== Animaciones ===== */
    @keyframes flapOpenWide {
      0% {
        transform: rotateX(0deg);
      }

      100% {
        transform: rotateX(180deg);
      }
    }

    @keyframes innerRiseWide {
      0% {
        transform: translateY(20%);
        opacity: 0;
      }

      60% {
        transform: translateY(-5%);
        opacity: 1;
      }

      100% {
        transform: translateY(-10%);
        opacity: 1;
      }
    }

    @keyframes ribbonFadeWide {
      to {
        opacity: 0;
        filter: blur(2px);
      }
    }

    @keyframes sealPopWide {
      0% {
        transform: translate(-50%, -50%) scale(.8);
      }

      100% {
        transform: translate(-50%, -50%) scale(1);
      }
    }

    @keyframes sealCrackWide {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }

      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(.7);
      }
    }

    /* Hint */
    .tap-hint {
      position: absolute;
      bottom: 5vmin;
      left: 50%;
      transform: translateX(-50%);
      font-size: 13px;
      color: #777;
      background: #ffffffcc;
      border: 1px solid #ffffffaa;
      padding: 6px 10px;
      border-radius: 999px;
      opacity: 0;
      animation: hintIn .6s ease 2.2s forwards, hintOut .6s ease 4.6s forwards;
    }

    /* ===== Animaciones ===== */
    @keyframes flapDrop {
      0% {
        transform: scaleY(1);
      }

      100% {
        transform: scaleY(0);
      }

      /* la solapa se “despliega” hacia abajo y desaparece */
    }

    @keyframes ribbonFade {
      to {
        opacity: 0;
        filter: blur(1px);
      }
    }

    @keyframes sealPop {
      0% {
        transform: translate(-50%, -50%) scale(.9);
      }

      100% {
        transform: translate(-50%, -50%) scale(1);
      }
    }

    /* “quiebre” del sello: se encoge y desvanece */
    @keyframes sealCrack {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }

      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(.7);
      }
    }

    /* El contenido sube y aparece (la carta se abre verticalmente) */
    @keyframes innerRise {
      0% {
        transform: translateY(18%);
        opacity: 0;
      }

      60% {
        transform: translateY(-8%);
        opacity: 1;
      }

      100% {
        transform: translateY(-16%);
        opacity: 1;
      }
    }

    @keyframes hintIn {
      to {
        opacity: 1;
      }
    }

    @keyframes hintOut {
      to {
        opacity: 0;
      }
    }

    /* Respeto a reduced motion */
    @media (prefers-reduced-motion: reduce) {

      .paper__flap,
      .letter__ribbon,
      .letter__seal,
      .paper__inner,
      .tap-hint {
        animation: none !important;
        opacity: 1;
      }
    }

    /* ====== Carta a ancho completo ====== */

    /* La escena ocupa toda la ventana, sin márgenes */
    .letter-stage {
      width: 100vw;
      height: 100vh;
      padding: 0;
      margin: 0;
      display: grid;
      place-items: center;
      perspective: 1200px;
      overflow: hidden;
    }

    /* La carta llena el ancho, ajustando su alto automáticamente */
    .letter {
      position: relative;
      width: 100vw;
      height: 100vh;
      aspect-ratio: auto;
      /* permite ocupar toda la altura */
      border-radius: 0;
      overflow: visible;
      transform-style: preserve-3d;
      filter: drop-shadow(0 12px 36px rgba(0, 0, 0, .18));
    }

    /* El papel cubre completamente la pantalla */
    .letter__paper {
      position: absolute;
      inset: 0;
      border-radius: 0;
      background: linear-gradient(180deg, #fffdf8 0%, #fff7e9 100%);
      box-shadow: inset 0 -80px 120px rgba(137, 90, 0, .06);
      border: 1px solid rgba(90, 60, 0, .05);
    }

    /* Solapa ocupa todo el ancho y se pliega desde arriba */
    .paper__flap {
      height: 35vh;
      /* solapa grande */
      transform-origin: 50% 0%;
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
      border-radius: 0;
      background: linear-gradient(180deg, #fffdf8 0%, #fff1cf 100%);
      border-bottom: 1px solid rgba(90, 60, 0, .10);
      animation: flapDropFull 1.4s cubic-bezier(.2, .7, .2, 1) .6s forwards;
      z-index: 3;
    }

    /* El cuerpo del papel llena el resto */
    .paper__body {
      position: absolute;
      inset: 0;
      top: 35vh;
      overflow: hidden;
    }

    /* Texto centrado sobre el cuerpo */
    .paper__inner {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      padding: 2vmin;
      text-align: center;
      transform: translateY(15%);
      opacity: 0;
      animation: innerRiseFull 1s ease-out 1.8s forwards;
      background:
        radial-gradient(60% 40% at 80% 0%, var(--pastel-sky, #a0c4ff) 0%, transparent 60%),
        radial-gradient(60% 40% at 20% 100%, var(--pastel-rose, #ffd6e0) 0%, transparent 60%),
        transparent;
    }

    /* Cinta y sello centrados */
    .letter__ribbon {
      top: 0;
      bottom: 0;
      left: 50%;
      width: clamp(12px, 1.4vw, 20px);
      transform: translateX(-50%);
      background: repeating-linear-gradient(180deg,
          rgba(120, 0, 0, .25) 0 8px,
          rgba(120, 0, 0, .18) 8px 16px);
      z-index: 4;
      animation: ribbonFadeFull .5s ease 1.2s forwards;
    }

    .letter__seal {
      top: 35vh;
      /* justo sobre la solapa */
      transform: translate(-50%, -50%) scale(1);
      width: clamp(70px, 10vmin, 100px);
      height: clamp(70px, 10vmin, 100px);
      z-index: 5;
      animation: sealPopFull .6s ease-out .9s forwards,
        sealCrackFull .35s ease-out 1.3s forwards;
    }

    /* Texto grande centrado para aprovechar ancho */
    .inner-names {
      font-size: clamp(48px, 6vw, 100px);
    }

    .inner-date {
      font-size: clamp(16px, 2vw, 22px);
    }

    .inner-title {
      font-size: clamp(18px, 2.5vw, 26px);
    }

    /* ==== Animaciones adaptadas a pantalla completa ==== */
    @keyframes flapDropFull {
      0% {
        transform: scaleY(1);
      }

      100% {
        transform: scaleY(0);
      }
    }

    @keyframes innerRiseFull {
      0% {
        transform: translateY(15%);
        opacity: 0;
      }

      60% {
        transform: translateY(-5%);
        opacity: 1;
      }

      100% {
        transform: translateY(-12%);
        opacity: 1;
      }
    }

    @keyframes ribbonFadeFull {
      to {
        opacity: 0;
        filter: blur(2px);
      }
    }

    @keyframes sealPopFull {
      0% {
        transform: translate(-50%, -50%) scale(.8);
      }

      100% {
        transform: translate(-50%, -50%) scale(1);
      }
    }

    @keyframes sealCrackFull {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }

      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(.7);
      }
    }

    /* ====== Limpiezas visuales ====== */
    /* Quitar listón */
    .letter__ribbon {
      display: none !important;
    }

    /* Quitar tono amarillo del papel y de la solapa */
    .letter__paper {
      background: linear-gradient(180deg, #fffefb 0%, #fffaf4 100%) !important;
    }

    .paper__flap {
      background: linear-gradient(180deg, #fffefb 0%, #fff7f0 100%) !important;
      border-bottom: 1px solid rgba(0, 0, 0, .04) !important;
    }

    /* Si usaste un fondo de color en el interior, deja solo muy sutil */
    .paper__inner {
      background:
        radial-gradient(60% 36% at 82% 0%, rgba(160, 196, 255, .18) 0%, transparent 70%),
        radial-gradient(60% 36% at 18% 100%, rgba(255, 214, 224, .18) 0%, transparent 70%) !important;
    }

    /* ====== Sello de cera: grande, realista, partido ====== */
    :root {
      --sealSize: clamp(100px, 14vmin, 160px);
    }

    .letter__seal {
      position: absolute;
      left: 50%;
      top: clamp(22vh, 40%, 50%);
      /* centrado vertical aprox */
      transform: translate(-50%, -50%);
      width: var(--sealSize);
      height: var(--sealSize);
      z-index: 6;
      /* por encima de la solapa */
      pointer-events: none;
    }

    /* Mitades del sello (se superponen) */
    .letter__seal .wax {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      box-shadow:
        inset 0 10px 18px rgba(255, 255, 255, .45),
        inset 0 -12px 20px rgba(0, 0, 0, .25),
        0 18px 32px rgba(0, 0, 0, .28);
      background:
        radial-gradient(120% 120% at 28% 24%, #ff6b98 0%, #d10057 55%, #8f0034 100%);
      /* Borde irregular tipo cera (onditas) */
      -webkit-mask:
        radial-gradient(120% 120% at 50% 50%, #000 55%, transparent 57%) subtract,
        radial-gradient(100% 100% at 50% 50%, #000 62%, transparent 64%) subtract,
        radial-gradient(100% 100% at 30% 70%, #000 66%, transparent 68%) subtract,
        radial-gradient(100% 100% at 70% 30%, #000 66%, transparent 68%) subtract;
      mask:
        radial-gradient(120% 120% at 50% 50%, #000 55%, transparent 57%) subtract,
        radial-gradient(100% 100% at 50% 50%, #000 62%, transparent 64%) subtract,
        radial-gradient(100% 100% at 30% 70%, #000 66%, transparent 68%) subtract,
        radial-gradient(100% 100% at 70% 30%, #000 66%, transparent 68%) subtract;
    }

    /* Clip de cada mitad */
    .letter__seal .wax-left {
      clip-path: inset(0 50% 0 0 round 50%);
    }

    .letter__seal .wax-right {
      clip-path: inset(0 0 0 50% round 50%);
    }

    /* Monograma grabado (relieve) */
    .wax-emboss {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      letter-spacing: .12em;
      color: rgba(255, 255, 255, .9);
      text-shadow:
        0 1px 0 rgba(255, 255, 255, .4),
        0 -1px 0 rgba(0, 0, 0, .35);
      mix-blend-mode: screen;
    }

    /* ====== Animación: partir y desplazar mitades ====== */
    /* Empieza todo junto… */
    .letter__seal .wax-left,
    .letter__seal .wax-right {
      animation: none;
    }

    .wax-emboss {
      animation: embossFade .2s linear 1.2s forwards;
    }

    @keyframes embossFade {
      to {
        opacity: .0;
        filter: blur(1px);
      }
    }

    /* …y luego se parte el sello */
    .letter__seal .wax-left {
      animation: waxLeftSplit 0.6s ease-out 1.2s forwards;
    }

    .letter__seal .wax-right {
      animation: waxRightSplit 0.6s ease-out 1.2s forwards;
    }

    @keyframes waxLeftSplit {
      0% {
        transform: translateX(0) rotate(0);
        opacity: 1;
      }

      100% {
        transform: translateX(-130%) rotate(-8deg);
        opacity: .0;
      }
    }

    @keyframes waxRightSplit {
      0% {
        transform: translateX(0) rotate(0);
        opacity: 1;
      }

      100% {
        transform: translateX(130%) rotate(8deg);
        opacity: .0;
      }
    }

    /* ====== Apertura vertical del papel (después de romper el sello) ====== */
    .paper__flap {
      height: 32vh;
      /* solapa alta pero elegante */
      transform-origin: 50% 0%;
      clip-path: polygon(0 0, 100% 0, 50% 100%, 0 0);
      animation: flapOpenAfterSeal 1.0s ease-out 1.6s forwards !important;
      z-index: 5;
    }

    @keyframes flapOpenAfterSeal {
      0% {
        transform: rotateX(0deg);
      }

      100% {
        transform: rotateX(180deg);
      }

      /* se pliega hacia atrás */
    }

    /* (Opcional) Puedes ocultar el interior si solo quieres revelar la web */
    .paper__inner {
      animation: none !important;
      opacity: 0 !important;
    }

    /* ====== Tamaño y márgenes de la carta para que llene ancho sin deformarse ====== */
    .letter-stage {
      width: 100vw;
      height: 100vh;
      padding: 0;
      margin: 0;
      display: grid;
      place-items: center;
      perspective: 1200px;
      overflow: hidden;
    }

    .letter {
      width: min(100vw, 1600px);
      aspect-ratio: 3 / 2;
      /* carta horizontal agradable */
      height: auto;
      overflow: visible;
      transform-style: preserve-3d;
      filter: drop-shadow(0 20px 50px rgba(0, 0, 0, .18));
    }

    /* ===== Desactivar animación de abrir sobre ===== */

    /* 1️⃣ Mantiene la solapa fija (no se pliega) */
    .paper__flap {
      animation: none !important;
      transform: none !important;
      clip-path: polygon(0 0, 100% 0, 50% 100%, 0 0);
    }

    /* 2️⃣ Si se había ocultado al “abrirse”, vuelve a verse normal */
    .paper__flap,
    .letter__paper,
    .paper__body {
      opacity: 1 !important;
      visibility: visible !important;
    }

    /* 3️⃣ Asegura que el contenido interno (texto o imagen) no se anime */
    .paper__inner {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }

    /* ===== Intro: sello + telón ===== */
    .curtains-stage {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      overflow: hidden;
      perspective: 1200px;
      z-index: 9999;
      /* mismo fondo que tu tema para que no “cante” */
      background:
        linear-gradient(180deg, rgba(255, 248, 239, .98), rgba(255, 248, 239, .92)),
        radial-gradient(1100px 800px at 12% 0%, var(--pastel-rose) 0%, transparent 60%),
        radial-gradient(1100px 900px at 88% 100%, var(--pastel-sky) 0%, transparent 60%),
        var(--bg-cream);
    }

    /* Telones */
    .curtain {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 52vw;
      /* se solapan un poco al centro */
      background:
        linear-gradient(180deg, #fffefb 0%, #fff7f0 100%);
      box-shadow:
        inset 0 0 40px rgba(0, 0, 0, .05),
        0 0 30px rgba(0, 0, 0, .06);
      z-index: 1;
    }

    .curtain-left {
      left: 0;
      transform: translateX(0);
    }

    .curtain-right {
      right: 0;
      transform: translateX(0);
    }

    /* Animación de abrir telón */
    @keyframes openLeft {
      to {
        transform: translateX(-110%);
      }
    }

    @keyframes openRight {
      to {
        transform: translateX(110%);
      }
    }

    /* Sello de cera (grande y centrado) */
    :root {
      --sealSize: clamp(110px, 16vmin, 180px);
    }

    .wax-seal {
      position: relative;
      width: var(--sealSize);
      height: var(--sealSize);
      z-index: 3;
      pointer-events: none;
    }

    /* Mitades del sello con borde orgánico y volumen */
    .wax-seal .wax {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background:
        radial-gradient(120% 120% at 30% 30%, #ff6fa0 0%, #d10057 55%, #8f0034 100%);
      box-shadow:
        inset 0 12px 20px rgba(255, 255, 255, .45),
        inset 0 -14px 22px rgba(0, 0, 0, .25),
        0 18px 36px rgba(0, 0, 0, .28);
      /* contorno ondulado estilo cera */
      -webkit-mask:
        radial-gradient(120% 120% at 50% 50%, #000 55%, transparent 57%) subtract,
        radial-gradient(100% 100% at 50% 50%, #000 62%, transparent 64%) subtract,
        radial-gradient(100% 100% at 30% 70%, #000 66%, transparent 68%) subtract,
        radial-gradient(100% 100% at 70% 30%, #000 66%, transparent 68%) subtract;
      mask:
        radial-gradient(120% 120% at 50% 50%, #000 55%, transparent 57%) subtract,
        radial-gradient(100% 100% at 50% 50%, #000 62%, transparent 64%) subtract,
        radial-gradient(100% 100% at 30% 70%, #000 66%, transparent 68%) subtract,
        radial-gradient(100% 100% at 70% 30%, #000 66%, transparent 68%) subtract;
    }

    .wax-left {
      clip-path: inset(0 50% 0 0 round 50%);
    }

    .wax-right {
      clip-path: inset(0 0 0 50% round 50%);
    }

    /* Monograma grabado */
    .wax-emboss {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      letter-spacing: .12em;
      color: rgba(255, 255, 255, .92);
      text-shadow:
        0 1px 0 rgba(255, 255, 255, .45),
        0 -1px 0 rgba(0, 0, 0, .35);
      mix-blend-mode: screen;
      z-index: 2;
    }

    /* === Timeline de la intro ===
   0.6s: crack del sello
   1.0s: empieza apertura de telón
   2.1s: telón fuera; tu página ya se ve
*/
    @keyframes sealLeftCrack {
      0% {
        transform: translateX(0) rotate(0);
        opacity: 1;
      }

      100% {
        transform: translateX(-140%) rotate(-10deg);
        opacity: 0;
      }
    }

    @keyframes sealRightCrack {
      0% {
        transform: translateX(0) rotate(0);
        opacity: 1;
      }

      100% {
        transform: translateX(140%) rotate(10deg);
        opacity: 0;
      }
    }

    /* Disparos */
    .wax-left {
      animation: sealLeftCrack .5s ease-out .6s forwards;
    }

    .wax-right {
      animation: sealRightCrack .5s ease-out .6s forwards;
    }

    .wax-emboss {
      animation: fadeEmboss .25s linear .6s forwards;
    }

    @keyframes fadeEmboss {
      to {
        opacity: 0;
        filter: blur(1px);
      }
    }

    .curtain-left {
      animation: openLeft 1.1s cubic-bezier(.2, .7, .2, 1) 1.0s forwards;
    }

    .curtain-right {
      animation: openRight 1.1s cubic-bezier(.2, .7, .2, 1) 1.0s forwards;
    }

    /* Respeto a reduced motion */
    @media (prefers-reduced-motion: reduce) {

      .wax-left,
      .wax-right,
      .wax-emboss,
      .curtain-left,
      .curtain-right {
        animation: none !important;
      }
    }

    /* Desactiva cualquier resto del “sobre” antiguo */
    .envelope,
    .envelope__back,
    .envelope__front,
    .envelope__flap,
    .envelope__card,
    .letter,
    .letter__paper,
    .paper__flap,
    .paper__body,
    .paper__inner,
    .letter__ribbon {
      display: none !important;
    }

    /* ====== FIX: sello 100% opaco, con volumen real ====== */

    /* Coloca el overlay encima de todo */
    .curtains-stage {
      z-index: 9999 !important;
    }

    /* Sello: tamaño y z-index por encima de los telones */
    :root {
      --sealSize: clamp(120px, 16vmin, 180px);
    }

    .wax-seal {
      position: relative;
      width: var(--sealSize);
      height: var(--sealSize);
      z-index: 5 !important;
      /* por encima de .curtain */
      pointer-events: none;
    }

    /* Mitades del sello: color sólido sin mezcla ni máscaras problemáticas */
    .wax-seal .wax {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      /* ⚠️ quitar blend/mask que causaba transparencia */
      mix-blend-mode: normal !important;
      -webkit-mask: none !important;
      mask: none !important;

      /* Cera sólida con volumen */
      background:
        radial-gradient(120% 120% at 30% 30%, #ff2e6e 0%, #d0004c 56%, #8b0032 100%);
      box-shadow:
        inset 0 14px 22px rgba(255, 255, 255, .45),
        inset 0 -16px 24px rgba(0, 0, 0, .28),
        0 18px 36px rgba(0, 0, 0, .35);
      opacity: 1 !important;
      filter: none;
    }

    /* Mitades (clip simple) */
    .wax-left {
      clip-path: inset(0 50% 0 0 round 50%);
    }

    .wax-right {
      clip-path: inset(0 0 0 50% round 50%);
    }

    /* Borde de “cera” más definido: anillo */
    .wax-seal .wax::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 50%;
      box-shadow: inset 0 0 0 3px rgba(255, 255, 255, .25),
        inset 0 0 0 6px rgba(0, 0, 0, .12);
      pointer-events: none;
    }

    /* Reflejo y brillo suave para que no parezca plano */
    .wax-seal .wax::before {
      content: "";
      position: absolute;
      left: 10%;
      top: 12%;
      width: 40%;
      height: 36%;
      border-radius: 50%;
      background: radial-gradient(ellipse at 30% 30%, rgba(255, 255, 255, .55), rgba(255, 255, 255, 0) 70%);
      filter: blur(2px);
      pointer-events: none;
    }

    /* Monograma: sin blend, bien visible */
    .wax-emboss {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      letter-spacing: .12em;
      color: #fff;
      text-shadow: 0 1px 0 rgba(255, 255, 255, .35), 0 -1px 0 rgba(0, 0, 0, .45);
      mix-blend-mode: normal !important;
      opacity: 1;
    }

    /* Animación de ruptura (igual que antes) */
    @keyframes sealLeftCrack {
      to {
        transform: translateX(-140%) rotate(-10deg);
        opacity: 0;
      }
    }

    @keyframes sealRightCrack {
      to {
        transform: translateX(140%) rotate(10deg);
        opacity: 0;
      }
    }

    .wax-left {
      animation: sealLeftCrack .5s ease-out .6s forwards;
    }

    .wax-right {
      animation: sealRightCrack .5s ease-out .6s forwards;
    }

    .wax-emboss {
      animation: fadeEmboss .25s linear .6s forwards;
    }

    @keyframes fadeEmboss {
      to {
        opacity: 0;
        filter: blur(1px);
      }
    }

    /* Asegura que los telones NO se mezclen ni tapen el sello */
    .curtain {
      mix-blend-mode: normal !important;
      z-index: 3;
    }

    /* Si ves todavía transparencia en Safari/iOS, fuerza un fondo detrás del sello */
    .curtains-stage::before {
      content: "";
      position: absolute;
      inset: 0;
      background: transparent;
      /* pon #fff8ef si hiciera falta */
      z-index: 0;
    }

    /* ================================
   SELLO DE CERA REALISTA + TELÓN
   ================================ */
    .wax-stage {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: var(--bg-cream, #fff8ef);
      z-index: 9999;
      overflow: hidden;
    }

    /* Telones que se abren */
    .wax-stage::before,
    .wax-stage::after {
      content: "";
      position: absolute;
      top: 0;
      bottom: 0;
      width: 51vw;
      background: linear-gradient(180deg, #fffefb 0%, #fff7f0 100%);
      box-shadow: inset 0 0 40px rgba(0, 0, 0, .08);
      transition: transform 1.1s cubic-bezier(.2, .7, .2, 1);
      z-index: 2;
    }

    .wax-stage::before {
      left: 0;
      transform: translateX(0);
    }

    .wax-stage::after {
      right: 0;
      transform: translateX(0);
    }

    /* Sello de cera */
    :root {
      --sealSize: clamp(120px, 18vmin, 200px);
    }

    .wax-seal {
      position: relative;
      width: var(--sealSize);
      height: var(--sealSize);
      z-index: 3;
    }

    /* Mitades del sello: forma orgánica */
    .wax {
      position: absolute;
      inset: 0;
      border-radius: 46% 54% 48% 52% / 52% 46% 54% 48%;
      background:
        radial-gradient(140% 140% at 30% 30%, #ff4d7e 0%, #c60044 50%, #75002a 100%);
      box-shadow:
        inset 0 12px 20px rgba(255, 255, 255, .45),
        inset 0 -14px 20px rgba(0, 0, 0, .25),
        0 16px 32px rgba(0, 0, 0, .35);
    }

    .wax-left {
      clip-path: inset(0 50% 0 0 round 50%);
    }

    .wax-right {
      clip-path: inset(0 0 0 50% round 50%);
    }

    /* Borde de anillo y textura */
    .wax::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background:
        radial-gradient(circle at 50% 50%, transparent 58%, rgba(0, 0, 0, .25) 60%, transparent 63%);
      mix-blend-mode: multiply;
    }

    /* Reflejo de cera brillante */
    .wax::after {
      content: "";
      position: absolute;
      top: 18%;
      left: 20%;
      width: 40%;
      height: 32%;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, .55), rgba(255, 255, 255, 0) 70%);
      filter: blur(3px);
    }

    /* Relieve de las iniciales */
    .wax-emboss {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-family: "Playfair Display", serif;
      font-weight: 700;
      font-size: clamp(28px, 5vmin, 48px);
      color: rgba(255, 255, 255, .9);
      text-shadow:
        0 2px 0 rgba(0, 0, 0, .4),
        0 -1px 0 rgba(255, 255, 255, .3);
      z-index: 4;
    }

    /* ===== ANIMACIONES ===== */

    /* Romper el sello */
    @keyframes leftCrack {
      0% {
        transform: translateX(0) rotate(0);
        opacity: 1;
      }

      100% {
        transform: translateX(-140%) rotate(-10deg);
        opacity: 0;
      }
    }

    @keyframes rightCrack {
      0% {
        transform: translateX(0) rotate(0);
        opacity: 1;
      }

      100% {
        transform: translateX(140%) rotate(10deg);
        opacity: 0;
      }
    }

    .wax-left {
      animation: leftCrack 0.6s ease-out 0.8s forwards;
    }

    .wax-right {
      animation: rightCrack 0.6s ease-out 0.8s forwards;
    }

    .wax-emboss {
      animation: fadeEmboss .3s linear .8s forwards;
    }

    @keyframes fadeEmboss {
      to {
        opacity: 0;
        filter: blur(1px);
      }
    }

    /* Telones se abren tras romper el sello */
    @keyframes openLeft {
      to {
        transform: translateX(-110%);
      }
    }

    @keyframes openRight {
      to {
        transform: translateX(110%);
      }
    }

    .wax-stage::before {
      animation: openLeft 1.1s cubic-bezier(.2, .7, .2, 1) 1.2s forwards;
    }

    .wax-stage::after {
      animation: openRight 1.1s cubic-bezier(.2, .7, .2, 1) 1.2s forwards;
    }

    /* Opcional: desvanecer todo el overlay */
    @keyframes fadeOut {
      to {
        opacity: 0;
        visibility: hidden;
      }
    }

    body.page-ready .wax-stage {
      animation: fadeOut .7s ease 2.4s forwards;
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {

      .wax-left,
      .wax-right,
      .wax-emboss,
      .wax-stage::before,
      .wax-stage::after {
        animation: none !important;
      }
    }


    /* =============================
   WAX SEAL – aspecto realista
   ============================= */

    /* tamaño cómodo (ajústalo si quieres) */
    :root {
      --sealSize: clamp(130px, 18vmin, 210px);
    }

    .wax-seal {
      width: var(--sealSize);
      height: var(--sealSize);
      position: relative;
      z-index: 5;
    }

    /* --- CONTORNO IRREGULAR (charquito de cera) detrás del sello --- */
    .wax-seal::before {
      content: "";
      position: absolute;
      inset: -6%;
      /* forma orgánica con “bultitos” alrededor */
      background:
        radial-gradient(42% 48% at 20% 18%, #a0003a 0 55%, transparent 60%),
        radial-gradient(48% 42% at 78% 24%, #a0003a 0 55%, transparent 60%),
        radial-gradient(50% 50% at 16% 76%, #a0003a 0 55%, transparent 60%),
        radial-gradient(44% 46% at 82% 78%, #a0003a 0 55%, transparent 60%),
        radial-gradient(50% 50% at 50% 50%, #c4004e 0 60%, #9b0038 65% 80%, transparent 82%);
      filter: blur(0.6px);
      border-radius: 50%;
      box-shadow:
        0 12px 26px rgba(0, 0, 0, .35),
        inset 0 2px 4px rgba(255, 255, 255, .25);
      z-index: 0;
    }

    /* --- Cuerpo del sello (dos mitades) con volumen satinado --- */
    .wax-seal .wax {
      position: absolute;
      inset: 0;
      border-radius: 46% 54% 48% 52% / 52% 46% 54% 48%;
      /* capas: color base + satinado + sombra interna */
      background:
        /* brillo satinado circular */
        radial-gradient(140% 140% at 30% 28%, #ff6a93 0%, #d40055 52%, #8a0031 100%),
        /* halo suave para evitar “plano” */
        radial-gradient(80% 80% at 70% 70%, rgba(255, 120, 160, .15), transparent 60%);
      box-shadow:
        inset 0 14px 22px rgba(255, 255, 255, .45),
        inset 0 -18px 26px rgba(0, 0, 0, .28),
        0 18px 36px rgba(0, 0, 0, .35);
      /* SIN blend ni mask para evitar “transparente” */
      mix-blend-mode: normal !important;
      -webkit-mask: none !important;
      mask: none !important;
    }

    /* recorte de mitades */
    .wax-left {
      clip-path: inset(0 50% 0 0 round 50%);
    }

    .wax-right {
      clip-path: inset(0 0 0 50% round 50%);
    }

    /* ribete biselado (anillo) sobre el sello */
    .wax-seal::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background:
        /* anillo interior con luces/sombras */
        conic-gradient(from 210deg, rgba(255, 255, 255, .85), rgba(255, 255, 255, 0) 15% 45%, rgba(0, 0, 0, .25) 60%, rgba(255, 255, 255, .65) 88%, rgba(255, 255, 255, .85)),
        radial-gradient(circle at 50% 50%, transparent 58%, rgba(0, 0, 0, .22) 60%, transparent 64%);
      pointer-events: none;
      z-index: 3;
    }

    /* brillo principal (gotita) encima de cada mitad */
    .wax-seal .wax::after {
      content: "";
      position: absolute;
      left: 18%;
      top: 20%;
      width: 42%;
      height: 34%;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, .60), rgba(255, 255, 255, 0) 70%);
      filter: blur(2px);
      pointer-events: none;
    }

    /* micro-textura sutil (evita aspecto “vector” plano) */
    .wax-seal .wax::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background:
        radial-gradient(120% 120% at 50% 50%, rgba(255, 255, 255, .02), rgba(0, 0, 0, .03)),
        repeating-linear-gradient(45deg, rgba(255, 255, 255, .015) 0 2px, rgba(0, 0, 0, .02) 2px 4px);
      mix-blend-mode: multiply;
      pointer-events: none;
    }

    /* iniciales en relieve */
    .wax-emboss {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      letter-spacing: .14em;
      font-size: clamp(28px, 5vmin, 48px);
      color: #fff;
      text-shadow:
        0 2px 0 rgba(0, 0, 0, .42),
        /* sombra hacia abajo (grabado) */
        0 -1px 0 rgba(255, 255, 255, .28);
      mix-blend-mode: normal !important;
      z-index: 4;
    }

    /* --- Animación de ruptura (conserva tu telón) --- */
    @keyframes leftCrack {
      to {
        transform: translateX(-140%) rotate(-10deg);
        opacity: 0;
      }
    }

    @keyframes rightCrack {
      to {
        transform: translateX(140%) rotate(10deg);
        opacity: 0;
      }
    }

    .wax-left {
      animation: leftCrack .6s ease-out .8s forwards;
    }

    .wax-right {
      animation: rightCrack .6s ease-out .8s forwards;
    }

    .wax-emboss {
      animation: embossFade .25s linear .8s forwards;
    }

    @keyframes embossFade {
      to {
        opacity: 0;
        filter: blur(1px);
      }
    }
  </style>
</head>

<body>
  <div id="intro" aria-hidden="true">
    <div class="stage wax-stage">
      <div class="wax-seal">
        <div class="wax wax-left"></div>
        <div class="wax wax-right"></div>
        <div class="wax-emboss">K&nbsp;S</div>
      </div>
    </div>
  </div>





  <!-- Topbar: logo + hamburguesa -->
  <div class="topbar">
    <div class="topbar-inner">
      <a href="#home" class="logo" aria-label="Inicio">
        <img src="img/logo.jpg" alt="Logo">
        <span>Karen & Sergio</span>
      </a>
      <button class="hamburger" id="hamburger" aria-label="Abrir menú" aria-controls="menuOverlay"
        aria-expanded="false">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
    </div>
  </div>



  <!-- Overlay / Índice de la página -->
  <div id="menuOverlay" role="dialog" aria-modal="true">
    <nav class="menu">
      <a href="#home">Inicio <small>Hero</small></a>
      <a href="#ceremonia">Ceremonia <small>Templo</small></a>
      <a href="#recepcion">Recepción <small>Fiesta</small></a>
      <a href="#info">Información <small>Regalos / Confirmación</small></a>
      <a href="#itinerario">Itinerario</a>
    </nav>
  </div>

  <div id="inviteMount"></div>

  <div class="wrap">
    <header class="hero" id="home">
      <h1 class="names">Karen <span class="amp">&</span> Sergio</h1>
      <div class="date">Sábado · 11 · Julio · 2026</div>
      <p class="tagline">Con alegría, invitamos a celebrar el comienzo de nuestra vida juntos.</p>
      <!-- Contador a la fecha -->
      <div class="countdown" id="countdown">
        <div class="cd-box">
          <div class="cd-num" id="d">–</div>
          <div class="cd-lbl">Días</div>
        </div>
        <div class="cd-box">
          <div class="cd-num" id="h">–</div>
          <div class="cd-lbl">Horas</div>
        </div>
        <div class="cd-box">
          <div class="cd-num" id="m">–</div>
          <div class="cd-lbl">Min</div>
        </div>
        <div class="cd-box">
          <div class="cd-num" id="s">–</div>
          <div class="cd-lbl">Seg</div>
        </div>
      </div>
      <div class="add-to-cal" id="addToCal">
        <button class="btn" id="addToCalBtn" type="button" aria-label="Agregar al calendario">Agregar al
          calendario</button>
      </div>
    </header>

    <!-- Ceremonia -->
    <section class="section-stack" id="ceremonia">
      <div class="watermark reveal fade-image">
        <img src="img/iglesia.jpeg" alt="Ilustración tipo acuarela de catedral">
      </div>

      <div class="card reveal">
        <h2 class="section-title">Ceremonia Religiosa</h2>
        <p><strong>Hora:</strong> <em>por definir</em></p>
        <p><strong>Lugar:</strong> Templo de San Antonio de Padua — <a href="#" target="_blank" rel="noopener">Ver
            mapa</a></p>
        <p>Nos encantará contar con tu presencia en la ceremonia donde daremos el “sí”.</p>
      </div>
    </section>

    <!-- Recepción -->
    <section class="section-stack" id="recepcion">
      <div class="watermark reveal fade-image">
        <img src="img/salon.jpeg" alt="Ilustración tipo acuarela del salón">
      </div>

      <div class="card reveal">
        <h2 class="section-title">Recepción</h2>
        <p><strong>Hora:</strong> <em>por definir</em></p>
        <p><strong>Lugar:</strong> Salón / Jardín — <a href="#" target="_blank" rel="noopener">Ver mapa</a></p>
        <p>Después de la ceremonia, celebraremos con cena, música y mucho amor.</p>
      </div>
    </section>

    <!-- Info útil -->
    <section class="grid grid-3" id="info">
      <div class="card">
        <h3 class="section-title" style="font-size:22px">Código de vestimenta</h3>
        <p>Formal de día. Tonos neutros o pasteles son bienvenidos.</p>
      </div>
      <div class="card">
        <h3 class="section-title" style="font-size:22px">Mesa de regalos</h3>
        <p>Puedes ver nuestras opciones aquí:</p>
        <a id="btnLiverpool" class="btn btn-liverpool"
          href="https://mesaderegalos.liverpool.com.mx/milistaderegalos/51755634" target="_blank" rel="noopener">
          <span>Liverpool</span>
        </a>
      </div>
      <div class="card">
        <h3 class="section-title" style="font-size:22px">Confirmación</h3>
        <p>Ayúdanos confirmando tu asistencia.</p>
        <a class="btn"
          href="https://wa.me/?text=Confirmo%20mi%20asistencia%20a%20la%20boda%20de%20Karen%20y%20Sergio%20el%2011%20de%20julio%20de%202026"
          target="_blank" rel="noopener">Confirmar por WhatsApp</a>
      </div>
    </section>

    <!-- Itinerario (opcional) -->
    <section class="card" id="itinerario">
      <h2 class="section-title">Itinerario</h2>
      <ul class="list">
        <li><strong>16:00</strong> — Recepción de invitados (ceremonia)</li>
        <li><strong>17:00</strong> — Ceremonia religiosa</li>
        <li><strong>19:30</strong> — Coctel de bienvenida (recepción)</li>
        <li><strong>20:30</strong> — Cena y celebración</li>
      </ul>
      <p style="margin-top:10px; font-size:13px; color:#777">*Horarios a ajustar — coloca los definitivos cuando
        los tengan.</p>
    </section>

    <footer>
      “El amor todo lo puede.” — ¡Nos vemos el 11/07/2026!
    </footer>
  </div>

  <script>

    (function () {
      const qs = new URLSearchParams(location.search);
      const name = qs.get('n');             // “Fam. Caraveo Martínez”
      const passes = parseInt(qs.get('p'), 10); // 1…6
      if (!name || !passes) return; // si no hay parámetros, no mostramos la tarjeta

      // Construcción de la tarjeta
      const host = document.getElementById('inviteMount');
      const wrap = document.createElement('div');
      wrap.className = 'invite-card';
      wrap.innerHTML = `
      <div class="invite-head">
        <img class="invite-photo" src="img/intro_imagen.jpeg" alt="Pareja" />
        <div class="invite-names">
          <div class="big">KAREN & SERGIO</div>
          <div class="date">11 NOVIEMBRE 2026</div>
        </div>
      </div>
      <div class="invite-body">
        <div class="envelope-box">
          <span class="envelope-line"></span>
          <div class="envelope-seal">KS</div>
        </div>
        <div class="reserve">HEMOS RESERVADO PARA USTEDES</div>
        <div class="dots" id="dots"></div>
        <div class="who" id="whoname"></div>
      </div>
    `;
      host.appendChild(wrap);

      // Puntitos (pases)
      const maxDots = Math.max(3, Math.min(6, passes + Math.max(0, 5 - passes)));
      // mostramos 5 “slots” como en el ejemplo; si hay >5, añadimos más
      const total = Math.max(5, passes);
      const dots = wrap.querySelector('#dots');
      for (let i = 1; i <= total; i++) {
        const d = document.createElement('span');
        d.className = 'dot' + (i <= passes ? ' filled' : '');
        dots.appendChild(d);
      }
      wrap.querySelector('#whoname').textContent = name;
    })();
    
    // Botón "Agregar al calendario" (universal .ics + enlace a Google Calendar)
    (function () {
      const btn = document.getElementById('addToCalBtn');
      const gcal = document.getElementById('gcalLink');
      if (!btn || !gcal) return;

      // Datos del evento (all-day para compatibilidad amplia)
      const title = 'Boda de Karen & Sergio';
      const description = 'Con alegría, invitamos a celebrar el comienzo de nuestra vida juntos.\nMás detalles en la invitación.';
      const location = 'Por definir';
      const startDate = '20260711'; // YYYYMMDD
      const endDate = '20260712'; // no inclusivo (evento de día completo)

      // Construir link para Google Calendar
      const gcalBase = 'https://calendar.google.com/calendar/render?action=TEMPLATE';
      const params = new URLSearchParams({
        text: title,
        details: description,
        location: location,
        dates: `${startDate}/${endDate}`
      });
      gcal.href = `${gcalBase}&${params.toString()}`;

      // Helper: fecha actual UTC para DTSTAMP
      const pad = (n) => String(n).padStart(2, '0');
      const now = new Date();
      const dtstamp = `${now.getUTCFullYear()}${pad(now.getUTCMonth() + 1)}${pad(now.getUTCDate())}T${pad(now.getUTCHours())}${pad(now.getUTCMinutes())}${pad(now.getUTCSeconds())}Z`;

      // Generar archivo ICS y descargar
      function downloadICS() {
        const uid = `boda-karen-sergio-${startDate}@invitacion.local`;
        const lines = [
          'BEGIN:VCALENDAR',
          'VERSION:2.0',
          'PRODID:-//Karen & Sergio//Boda//ES',
          'CALSCALE:GREGORIAN',
          'METHOD:PUBLISH',
          'BEGIN:VEVENT',
          `UID:${uid}`,
          `DTSTAMP:${dtstamp}`,
          `DTSTART;VALUE=DATE:${startDate}`,
          `DTEND;VALUE=DATE:${endDate}`,
          `SUMMARY:${title}`,
          `DESCRIPTION:${description.replace(/\n/g, '\\n')}`,
          `LOCATION:${location}`,
          'END:VEVENT',
          'END:VCALENDAR'
        ];
        const ics = lines.join('\r\n');
        const blob = new Blob([ics], { type: 'text/calendar;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'Boda-Karen-Sergio-2026.ics';
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      }

      btn.addEventListener('click', downloadICS);
    })();
  </script>
  <script>
    // Contador al 11 de julio de 2026
    (function () {
      const target = new Date('2026-07-11T00:00:00');
      const d = document.getElementById('d');
      const h = document.getElementById('h');
      const m = document.getElementById('m');
      const s = document.getElementById('s');

      function tick() {
        const now = new Date();
        let diff = target - now;
        if (diff < 0) diff = 0;

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const mins = Math.floor((diff / (1000 * 60)) % 60);
        const secs = Math.floor((diff / 1000) % 60);

        d.textContent = days.toString();
        h.textContent = hours.toString().padStart(2, '0');
        m.textContent = mins.toString().padStart(2, '0');
        s.textContent = secs.toString().padStart(2, '0');
      }
      tick();
      setInterval(tick, 1000);
    })();
  </script>

  <script>
    // Revelar elementos .reveal al entrar al viewport
    (function () {
      const opts = { threshold: 0.15 };
      const io = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            e.target.classList.add('show');
            io.unobserve(e.target); // sólo una vez
          }
        });
      }, opts);

      document.querySelectorAll('.reveal').forEach(el => io.observe(el));
    })();
  </script>

  <script>
    (function () {
      const body = document.body;
      const intro = document.getElementById('intro');

      const revealContent = () => {
        body.classList.add('page-ready');
        body.classList.remove('intro-active');
        if (intro) {
          intro.classList.add('out');
          setTimeout(() => intro && intro.remove(), 800);
        }
      };

      try {
        if (intro) {
          body.classList.add('intro-active');

          // Failsafe principal: mostrar contenido tras AUTO_TIME si algo falla
          const AUTO_TIME = 1200; // ms
          let finished = false;
          const safeTimer = setTimeout(() => { if (!finished) { finished = true; revealContent(); } }, AUTO_TIME);

          const finish = () => {
            if (finished) return; finished = true;
            clearTimeout(safeTimer);
            revealContent();
          };

          // Permitir "skip" con click o teclas comunes
          intro.addEventListener('click', finish, { once: true });
          document.addEventListener('keydown', (e) => {
            if (['Escape', 'Enter', ' '].includes(e.key)) finish();
          }, { once: true });

          // Failsafe adicional tras la carga completa
          window.addEventListener('load', () => {
            setTimeout(() => { if (!finished) finish(); }, AUTO_TIME + 1200);
          });
        } else {
          // Si por alguna razón no existe el contenedor de intro, mostramos el contenido de inmediato
          body.classList.add('page-ready');
        }
      } catch (err) {
        // Ante cualquier error JS, mostramos el contenido para evitar pantalla en blanco
        body.classList.add('page-ready');
        console && console.warn && console.warn('Intro desactivada por error:', err);
      }
    })();
  </script>
  <script>
    (function () {
      const btn = document.getElementById('hamburger');
      const overlay = document.getElementById('menuOverlay');
      const toggle = () => {
        const open = overlay.classList.toggle('open');
        btn.classList.toggle('active', open);
        btn.setAttribute('aria-expanded', String(open));
        document.body.style.overflow = open ? 'hidden' : '';
      };
      btn.addEventListener('click', toggle);
      overlay.addEventListener('click', (e) => { if (e.target === overlay) toggle(); });
      overlay.querySelectorAll('a').forEach(a => a.addEventListener('click', () => toggle()));
    })();

    (function () {
      const btn = document.getElementById('btnLiverpool');
      if (!btn) return;

      // Evitar doble inicialización
      if (btn.dataset.paintInit === '1') return;
      btn.dataset.paintInit = '1';

      let observer = null;

      const cleanup = () => { if (observer) { observer.disconnect(); observer = null; } };

      const activate = () => {
        if (btn.classList.contains('paint')) return;
        // Pequeño delay para que el usuario perciba el barrido
        requestAnimationFrame(() => setTimeout(() => btn.classList.add('paint'), 80));
        cleanup();
        window.removeEventListener('pagehide', cleanup);
      };

      // Respeto a usuarios con "reduced motion"
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) {
        btn.style.transition = 'none';
      }

      const startObserver = () => {
        // Dispara cuando el botón entra por primera vez al viewport
        observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) activate();
          });
        }, { root: null, rootMargin: '0px 0px -10% 0px', threshold: 0.25 });
        observer.observe(btn);
      };

      // Esperar a que la intro se cierre (cuando body tenga la clase page-ready)
      const waitForReady = () => {
        if (document.body.classList.contains('page-ready')) {
          startObserver();
          clearInterval(poller);
        }
      };
      const poller = setInterval(waitForReady, 50);
      waitForReady();

      // Limpieza al abandonar la página
      window.addEventListener('pagehide', cleanup);
    })();
  </script>
</body>

</html>